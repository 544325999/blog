/*!
 * ZUI: 文件上传 - v1.7.0 - 2017-06-17
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2017 cnezsoft.com; Licensed MIT
 */
/*!
 * mOxie - multi-runtime File API & XMLHttpRequest L2 Polyfill
 * v1.5.2
 *
 * Copyright 2013, Moxiecode Systems AB
 * Released under GPL License.
 *
 * License: http://www.plupload.com/license
 * Contributing: http://www.plupload.com/contributing
 *
 * Date: 2016-11-23
 */
!function(g,Y){var c=function(){var g={};return Y.apply(g,arguments),g.moxie};"function"==typeof define&&define.amd?define("moxie",[],c):"object"==typeof module&&module.exports?module.exports=c():g.moxie=c()}(this||window,function(){!function(g,Y){"use strict";function c(g,Y){for(var c,d=[],b=0;b<g.length;++b){if(c=a[g[b]]||K(g[b]),!c)throw"module definition dependecy not found: "+g[b];d.push(c)}Y.apply(null,d)}function d(g,d,b){if("string"!=typeof g)throw"invalid module definition, module id must be defined and be a string";if(d===Y)throw"invalid module definition, dependencies must be specified";if(b===Y)throw"invalid module definition, definition function must be specified";c(d,function(){a[g]=b.apply(null,arguments)})}function b(g){return!!a[g]}function K(Y){for(var c=g,d=Y.split(/[.\/]/),b=0;b<d.length;++b){if(!c[d[b]])return;c=c[d[b]]}return c}function f(c){for(var d=0;d<c.length;d++){for(var b=g,K=c[d],f=K.split(/[.\/]/),bh=0;bh<f.length-1;++bh)b[f[bh]]===Y&&(b[f[bh]]={}),b=b[f[bh]];b[f[f.length-1]]=a[K]}}var a={};d("moxie/core/utils/Basic",[],function(){function g(g){var Y;return g===Y?"undefined":null===g?"null":g.nodeType?"node":{}.toString.call(g).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()}function Y(){return f(!1,!1,arguments)}function c(){return f(!0,!1,arguments)}function d(){return f(!1,!0,arguments)}function b(){return f(!0,!0,arguments)}function K(c){switch(g(c)){case"array":return Array.prototype.slice.call(c);case"object":return Y({},c)}return c}function f(Y,c,d){var b,a=d[0];return bh(d,function(d,fF){fF>0&&bh(d,function(d,bh){var fF=-1!==fj(g(d),["array","object"]);return!!(d===b||Y&&a[bh]===b)||(fF&&c&&(d=K(d)),void(g(a[bh])===g(d)&&fF?f(Y,c,[a[bh],d]):a[bh]=d))})}),a}function a(g,Y){function c(){this.constructor=g}for(var d in Y)({}).hasOwnProperty.call(Y,d)&&(g[d]=Y[d]);return c.prototype=Y.prototype,g.prototype=new c,g.__parent__=Y.prototype,g}function bh(g,Y){var c,d,b,K;if(g){try{c=g.length}catch(g){c=K}if(c===K||"number"!=typeof c){for(d in g)if(g.hasOwnProperty(d)&&Y(g[d],d)===!1)return}else for(b=0;c>b;b++)if(Y(g[b],b)===!1)return}}function fF(Y){var c;if(!Y||"object"!==g(Y))return!0;for(c in Y)return!1;return!0}function gF(Y,c){function d(b){"function"===g(Y[b])&&Y[b](function(g){++b<K&&!g?d(b):c(g)})}var b=0,K=Y.length;"function"!==g(c)&&(c=function(){}),Y&&Y.length||c(),d(b)}function fU(g,Y){var c=0,d=g.length,b=new Array(d);bh(g,function(g,K){g(function(g){if(g)return Y(g);var f=[].slice.call(arguments);f.shift(),b[K]=f,c++,c===d&&(b.unshift(null),Y.apply(this,b))})})}function fj(g,Y){if(Y){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(Y,g);for(var c=0,d=Y.length;d>c;c++)if(Y[c]===g)return c}return-1}function h(Y,c){var d=[];"array"!==g(Y)&&(Y=[Y]),"array"!==g(c)&&(c=[c]);for(var b in Y)-1===fj(Y[b],c)&&d.push(Y[b]);return!!d.length&&d}function bd(g,Y){var c=[];return bh(g,function(g){-1!==fj(g,Y)&&c.push(g)}),c.length?c:null}function U(g){var Y,c=[];for(Y=0;Y<g.length;Y++)c[Y]=g[Y];return c}function bR(g){return g?String.prototype.trim?String.prototype.trim.call(g):g.toString().replace(/^\s*/,"").replace(/\s*$/,""):g}function gV(g){if("string"!=typeof g)return g;var Y,c={t:1099511627776,g:1073741824,m:1048576,k:1024};return g=/^([0-9\.]+)([tmgk]?)$/.exec(g.toLowerCase().replace(/[^0-9\.tmkg]/g,"")),Y=g[2],g=+g[1],c.hasOwnProperty(Y)&&(g*=c[Y]),Math.floor(g)}function bB(Y){var c=[].slice.call(arguments,1);return Y.replace(/%[a-z]/g,function(){var Y=c.shift();return"undefined"!==g(Y)?Y:""})}function bQ(g,Y){var c=this;setTimeout(function(){g.call(c)},Y||1)}var cj=function(){var g=0;return function(Y){var c,d=(new Date).getTime().toString(32);for(c=0;5>c;c++)d+=Math.floor(65535*Math.random()).toString(32);return(Y||"o_")+d+(g++).toString(32)}}();return{guid:cj,typeOf:g,extend:Y,extendIf:c,extendImmutable:d,extendImmutableIf:b,inherit:a,each:bh,isEmptyObj:fF,inSeries:gF,inParallel:fU,inArray:fj,arrayDiff:h,arrayIntersect:bd,toArray:U,trim:bR,sprintf:bB,parseSizeStr:gV,delay:bQ}}),d("moxie/core/utils/Encode",[],function(){var g=function(g){return unescape(encodeURIComponent(g))},Y=function(g){return decodeURIComponent(escape(g))},c=function(g,c){if("function"==typeof window.atob)return c?Y(window.atob(g)):window.atob(g);var d,b,K,f,a,bh,fF,gF,fU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fj=0,h=0,bd="",U=[];if(!g)return g;g+="";do{f=fU.indexOf(g.charAt(fj++)),a=fU.indexOf(g.charAt(fj++)),bh=fU.indexOf(g.charAt(fj++)),fF=fU.indexOf(g.charAt(fj++)),gF=f<<18|a<<12|bh<<6|fF,d=255&gF>>16,b=255&gF>>8,K=255&gF,U[h++]=64==bh?String.fromCharCode(d):64==fF?String.fromCharCode(d,b):String.fromCharCode(d,b,K)}while(fj<g.length);return bd=U.join(""),c?Y(bd):bd},d=function(Y,c){if(c&&(Y=g(Y)),"function"==typeof window.btoa)return window.btoa(Y);var d,b,K,f,a,bh,fF,gF,fU="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",fj=0,h=0,bd="",U=[];if(!Y)return Y;do{d=Y.charCodeAt(fj++),b=Y.charCodeAt(fj++),K=Y.charCodeAt(fj++),gF=d<<16|b<<8|K,f=63&gF>>18,a=63&gF>>12,bh=63&gF>>6,fF=63&gF,U[h++]=fU.charAt(f)+fU.charAt(a)+fU.charAt(bh)+fU.charAt(fF)}while(fj<Y.length);bd=U.join("");var bR=Y.length%3;return(bR?bd.slice(0,bR-3):bd)+"===".slice(bR||3)};return{utf8_encode:g,utf8_decode:Y,atob:c,btoa:d}}),d("moxie/core/utils/Env",["moxie/core/utils/Basic"],function(g){function Y(g,Y,c){var d=0,b=0,K=0,f={dev:-6,alpha:-5,a:-5,beta:-4,b:-4,RC:-3,rc:-3,"#":-2,p:1,pl:1},a=function(g){return g=(""+g).replace(/[_\-+]/g,"."),g=g.replace(/([^.\d]+)/g,".$1.").replace(/\.{2,}/g,"."),g.length?g.split("."):[-8]},bh=function(g){return g?isNaN(g)?f[g]||-7:parseInt(g,10):0};for(g=a(g),Y=a(Y),b=Math.max(g.length,Y.length),d=0;b>d;d++)if(g[d]!=Y[d]){if(g[d]=bh(g[d]),Y[d]=bh(Y[d]),g[d]<Y[d]){K=-1;break}if(g[d]>Y[d]){K=1;break}}if(!c)return K;switch(c){case">":case"gt":return K>0;case">=":case"ge":return K>=0;case"<=":case"le":return 0>=K;case"==":case"=":case"eq":return 0===K;case"<>":case"!=":case"ne":return 0!==K;case"":case"<":case"lt":return 0>K;default:return null}}var c=function(g){var Y="",c="?",d="function",b="undefined",K="object",f="name",a="version",bh={has:function(g,Y){return-1!==Y.toLowerCase().indexOf(g.toLowerCase())},lowerize:function(g){return g.toLowerCase()}},fF={rgx:function(){for(var Y,c,f,a,bh,fF,gF,fU=0,fj=arguments;fU<fj.length;fU+=2){var h=fj[fU],bd=fj[fU+1];if(typeof Y===b){Y={};for(a in bd)bh=bd[a],typeof bh===K?Y[bh[0]]=g:Y[bh]=g}for(c=f=0;c<h.length;c++)if(fF=h[c].exec(this.getUA())){for(a=0;a<bd.length;a++)gF=fF[++f],bh=bd[a],typeof bh===K&&bh.length>0?2==bh.length?Y[bh[0]]=typeof bh[1]==d?bh[1].call(this,gF):bh[1]:3==bh.length?Y[bh[0]]=typeof bh[1]!==d||bh[1].exec&&bh[1].test?gF?gF.replace(bh[1],bh[2]):g:gF?bh[1].call(this,gF,bh[2]):g:4==bh.length&&(Y[bh[0]]=gF?bh[3].call(this,gF.replace(bh[1],bh[2])):g):Y[bh]=gF?gF:g;break}if(fF)break}return Y},str:function(Y,d){for(var b in d)if(typeof d[b]===K&&d[b].length>0){for(var f=0;f<d[b].length;f++)if(bh.has(d[b][f],Y))return b===c?g:b}else if(bh.has(d[b],Y))return b===c?g:b;return Y}},gF={browser:{oldsafari:{major:{1:["/8","/1","/3"],2:"/4","?":"/"},version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2e3:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",RT:"ARM"}}}},fU={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[f,a],[/\s(opr)\/([\w\.]+)/i],[[f,"Opera"],a],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]+)*/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]+)*/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi)\/([\w\.-]+)/i],[f,a],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[f,"IE"],a],[/(edge)\/((\d+)?[\w\.]+)/i],[f,a],[/(yabrowser)\/([\w\.]+)/i],[[f,"Yandex"],a],[/(comodo_dragon)\/([\w\.]+)/i],[[f,/_/g," "],a],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i,/(uc\s?browser|qqbrowser)[\/\s]?([\w\.]+)/i],[f,a],[/(dolfin)\/([\w\.]+)/i],[[f,"Dolphin"],a],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[f,"Chrome"],a],[/XiaoMi\/MiuiBrowser\/([\w\.]+)/i],[a,[f,"MIUI Browser"]],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)/i],[a,[f,"Android Browser"]],[/FBAV\/([\w\.]+);/i],[a,[f,"Facebook"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[a,[f,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[a,f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[f,[a,fF.str,gF.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[f,a],[/(navigator|netscape)\/([\w\.-]+)/i],[[f,"Netscape"],a],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix)\/([\w\.-]+)/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]+)*/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[f,a]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[a,[f,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[f,a],[/rv\:([\w\.]+).*(gecko)/i],[a,f]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[f,a],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*|windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[f,[a,fF.str,gF.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[f,"Windows"],[a,fF.str,gF.os.windows.version]],[/\((bb)(10);/i],[[f,"BlackBerry"],a],[/(blackberry)\w*\/?([\w\.]+)*/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\os|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]+)*/i,/linux;.+(sailfish);/i],[f,a],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]+)*/i],[[f,"Symbian"],a],[/\((series40);/i],[f],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[f,"Firefox OS"],a],[/(nintendo|playstation)\s([wids3portablevu]+)/i,/(mint)[\/\s\(]?(\w+)*/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|[open]*suse|gentoo|arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?([\w\.-]+)*/i,/(hurd|linux)\s?([\w\.]+)*/i,/(gnu)\s?([\w\.]+)*/i],[f,a],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[f,"Chromium OS"],a],[/(sunos)\s?([\w\.]+\d)*/i],[[f,"Solaris"],a],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]+)*/i],[f,a],[/(ip[honead]+)(?:.*os\s*([\w]+)*\slike\smac|;\sopera)/i],[[f,"iOS"],[a,/_/g,"."]],[/(mac\sos\sx)\s?([\w\s\.]+\w)*/i,/(macintosh|mac(?=_powerpc)\s)/i],[[f,"Mac OS"],[a,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]+)*/i,/(haiku)\s(\w+)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.]*)*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms)/i,/(unix)\s?([\w\.]+)*/i],[f,a]]},fj=function(g){var c=g||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:Y);this.getBrowser=function(){return fF.rgx.apply(this,fU.browser)},this.getEngine=function(){return fF.rgx.apply(this,fU.engine)},this.getOS=function(){return fF.rgx.apply(this,fU.os)},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS()}},this.getUA=function(){return c},this.setUA=function(g){return c=g,this},this.setUA(c)};return fj}(),d=function(){var Y={define_property:function(){return!1}(),create_canvas:function(){var g=document.createElement("canvas");return!(!g.getContext||!g.getContext("2d"))}(),return_response_type:function(Y){try{if(-1!==g.inArray(Y,["","text","document"]))return!0;if(window.XMLHttpRequest){var c=new XMLHttpRequest;if(c.open("get","/"),"responseType"in c)return c.responseType=Y,c.responseType===Y}}catch(g){}return!1},use_data_uri:function(){var g=new Image;return g.onload=function(){Y.use_data_uri=1===g.width&&1===g.height},setTimeout(function(){g.src="data:image/gif;base64,R0lGODlhAQABAIAAAP8AAAAAACH5BAAAAAAALAAAAAABAAEAAAICRAEAOw=="},1),!1}(),use_data_uri_over32kb:function(){return Y.use_data_uri&&("IE"!==K.browser||K.version>=9)},use_data_uri_of:function(g){return Y.use_data_uri&&33e3>g||Y.use_data_uri_over32kb()},use_fileinput:function(){if(navigator.userAgent.match(/(Android (1.0|1.1|1.5|1.6|2.0|2.1))|(Windows Phone (OS 7|8.0))|(XBLWP)|(ZuneWP)|(w(eb)?OSBrowser)|(webOS)|(Kindle\/(1.0|2.0|2.5|3.0))/))return!1;var g=document.createElement("input");return g.setAttribute("type","file"),!g.disabled}};return function(c){var d=[].slice.call(arguments);return d.shift(),"function"===g.typeOf(Y[c])?Y[c].apply(this,d):!!Y[c]}}(),b=(new c).getResult(),K={can:d,uaParser:c,browser:b.browser.name,version:b.browser.version,os:b.os.name,osVersion:b.os.version,verComp:Y,swf_url:"../flash/Moxie.swf",xap_url:"../silverlight/Moxie.xap",global_event_dispatcher:"moxie.core.EventTarget.instance.dispatchEvent"};return K.OS=K.os,K}),d("moxie/core/Exceptions",["moxie/core/utils/Basic"],function(g){function Y(g,Y){var c;for(c in g)if(g[c]===Y)return c;return null}return{RuntimeError:function(){function c(g,c){this.code=g,this.name=Y(d,g),this.message=this.name+(c||": RuntimeError "+this.code)}var d={NOT_INIT_ERR:1,EXCEPTION_ERR:3,NOT_SUPPORTED_ERR:9,JS_ERR:4};return g.extend(c,d),c.prototype=Error.prototype,c}(),OperationNotAllowedException:function(){function Y(g){this.code=g,this.name="OperationNotAllowedException"}return g.extend(Y,{NOT_ALLOWED_ERR:1}),Y.prototype=Error.prototype,Y}(),ImageError:function(){function c(g){this.code=g,this.name=Y(d,g),this.message=this.name+": ImageError "+this.code}var d={WRONG_FORMAT:1,MAX_RESOLUTION_ERR:2,INVALID_META_ERR:3};return g.extend(c,d),c.prototype=Error.prototype,c}(),FileException:function(){function c(g){this.code=g,this.name=Y(d,g),this.message=this.name+": FileException "+this.code}var d={NOT_FOUND_ERR:1,SECURITY_ERR:2,ABORT_ERR:3,NOT_READABLE_ERR:4,ENCODING_ERR:5,NO_MODIFICATION_ALLOWED_ERR:6,INVALID_STATE_ERR:7,SYNTAX_ERR:8};return g.extend(c,d),c.prototype=Error.prototype,c}(),DOMException:function(){function c(g){this.code=g,this.name=Y(d,g),this.message=this.name+": DOMException "+this.code}var d={INDEX_SIZE_ERR:1,DOMSTRING_SIZE_ERR:2,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,INVALID_CHARACTER_ERR:5,NO_DATA_ALLOWED_ERR:6,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INUSE_ATTRIBUTE_ERR:10,INVALID_STATE_ERR:11,SYNTAX_ERR:12,INVALID_MODIFICATION_ERR:13,NAMESPACE_ERR:14,INVALID_ACCESS_ERR:15,VALIDATION_ERR:16,TYPE_MISMATCH_ERR:17,SECURITY_ERR:18,NETWORK_ERR:19,ABORT_ERR:20,URL_MISMATCH_ERR:21,QUOTA_EXCEEDED_ERR:22,TIMEOUT_ERR:23,INVALID_NODE_TYPE_ERR:24,DATA_CLONE_ERR:25};return g.extend(c,d),c.prototype=Error.prototype,c}(),EventException:function(){function Y(g){this.code=g,this.name="EventException"}return g.extend(Y,{UNSPECIFIED_EVENT_TYPE_ERR:0}),Y.prototype=Error.prototype,Y}()}}),d("moxie/core/utils/Dom",["moxie/core/utils/Env"],function(g){var Y=function(g){return"string"!=typeof g?g:document.getElementById(g)},c=function(g,Y){if(!g.className)return!1;var c=new RegExp("(^|\\s+)"+Y+"(\\s+|$)");return c.test(g.className)},d=function(g,Y){c(g,Y)||(g.className=g.className?g.className.replace(/\s+$/,"")+" "+Y:Y)},b=function(g,Y){if(g.className){var c=new RegExp("(^|\\s+)"+Y+"(\\s+|$)");g.className=g.className.replace(c,function(g,Y,c){return" "===Y&&" "===c?" ":""})}},K=function(g,Y){return g.currentStyle?g.currentStyle[Y]:window.getComputedStyle?window.getComputedStyle(g,null)[Y]:void 0},f=function(Y,c){function d(g){var Y,c,d=0,b=0;return g&&(c=g.getBoundingClientRect(),Y="CSS1Compat"===fF.compatMode?fF.documentElement:fF.body,d=c.left+Y.scrollLeft,b=c.top+Y.scrollTop),{x:d,y:b}}var b,K,f,a=0,bh=0,fF=document;if(Y=Y,c=c||fF.body,Y&&Y.getBoundingClientRect&&"IE"===g.browser&&(!fF.documentMode||fF.documentMode<8))return K=d(Y),f=d(c),{x:K.x-f.x,y:K.y-f.y};for(b=Y;b&&b!=c&&b.nodeType;)a+=b.offsetLeft||0,bh+=b.offsetTop||0,b=b.offsetParent;for(b=Y.parentNode;b&&b!=c&&b.nodeType;)a-=b.scrollLeft||0,bh-=b.scrollTop||0,b=b.parentNode;return{x:a,y:bh}},a=function(g){return{w:g.offsetWidth||g.clientWidth,h:g.offsetHeight||g.clientHeight}};return{get:Y,hasClass:c,addClass:d,removeClass:b,getStyle:K,getPos:f,getSize:a}}),d("moxie/core/EventTarget",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic"],function(g,Y,c){function d(){this.uid=c.guid()}var b={};return c.extend(d.prototype,{init:function(){this.uid||(this.uid=c.guid("uid_"))},addEventListener:function(g,Y,d,K){var f,a=this;return this.hasOwnProperty("uid")||(this.uid=c.guid("uid_")),g=c.trim(g),/\s/.test(g)?void c.each(g.split(/\s+/),function(g){a.addEventListener(g,Y,d,K)}):(g=g.toLowerCase(),d=parseInt(d,10)||0,f=b[this.uid]&&b[this.uid][g]||[],f.push({fn:Y,priority:d,scope:K||this}),b[this.uid]||(b[this.uid]={}),void(b[this.uid][g]=f))},hasEventListener:function(g){var Y;return g?(g=g.toLowerCase(),Y=b[this.uid]&&b[this.uid][g]):Y=b[this.uid],!!Y&&Y},removeEventListener:function(g,Y){var d,K,f=this;if(g=g.toLowerCase(),/\s/.test(g))return void c.each(g.split(/\s+/),function(g){f.removeEventListener(g,Y)});if(d=b[this.uid]&&b[this.uid][g]){if(Y){for(K=d.length-1;K>=0;K--)if(d[K].fn===Y){d.splice(K,1);break}}else d=[];d.length||(delete b[this.uid][g],c.isEmptyObj(b[this.uid])&&delete b[this.uid])}},removeAllEventListeners:function(){b[this.uid]&&delete b[this.uid]},dispatchEvent:function(g){var d,K,f,a,bh,fF={},gF=!0;if("string"!==c.typeOf(g)){if(a=g,"string"!==c.typeOf(a.type))throw new Y.EventException(Y.EventException.UNSPECIFIED_EVENT_TYPE_ERR);g=a.type,a.total!==bh&&a.loaded!==bh&&(fF.total=a.total,fF.loaded=a.loaded),fF.async=a.async||!1}if(-1!==g.indexOf("::")?function(Y){d=Y[0],g=Y[1]}(g.split("::")):d=this.uid,g=g.toLowerCase(),K=b[d]&&b[d][g]){K.sort(function(g,Y){return Y.priority-g.priority}),f=[].slice.call(arguments),f.shift(),fF.type=g,f.unshift(fF);var fU=[];c.each(K,function(g){f[0].target=g.scope,fF.async?fU.push(function(Y){setTimeout(function(){Y(g.fn.apply(g.scope,f)===!1)},1)}):fU.push(function(Y){Y(g.fn.apply(g.scope,f)===!1)})}),fU.length&&c.inSeries(fU,function(g){gF=!g})}return gF},bindOnce:function(g,Y,c,d){var b=this;b.bind.call(this,g,function c(){return b.unbind(g,c),Y.apply(this,arguments)},c,d)},bind:function(){this.addEventListener.apply(this,arguments)},unbind:function(){this.removeEventListener.apply(this,arguments)},unbindAll:function(){this.removeAllEventListeners.apply(this,arguments)},trigger:function(){return this.dispatchEvent.apply(this,arguments)},handleEventProps:function(g){var Y=this;this.bind(g.join(" "),function(g){var Y="on"+g.type.toLowerCase();"function"===c.typeOf(this[Y])&&this[Y].apply(this,arguments)}),c.each(g,function(g){g="on"+g.toLowerCase(g),"undefined"===c.typeOf(Y[g])&&(Y[g]=null)})}}),d.instance=new d,d}),d("moxie/runtime/Runtime",["moxie/core/utils/Env","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/EventTarget"],function(g,Y,c,d){function b(g,d,K,a,bh){var fF,gF=this,fU=Y.guid(d+"_"),fj=bh||"browser";g=g||{},f[fU]=this,K=Y.extend({access_binary:!1,access_image_binary:!1,display_media:!1,do_cors:!1,drag_and_drop:!1,filter_by_extension:!0,resize_image:!1,report_upload_progress:!1,return_response_headers:!1,return_response_type:!1,return_status_code:!0,send_custom_headers:!1,select_file:!1,select_folder:!1,select_multiple:!0,send_binary_string:!1,send_browser_cookies:!0,send_multipart:!0,slice_blob:!1,stream_upload:!1,summon_file_dialog:!1,upload_filesize:!0,use_http_method:!0},K),g.preferred_caps&&(fj=b.getMode(a,g.preferred_caps,fj)),fF=function(){var g={};return{exec:function(Y,c,d,b){return fF[c]&&(g[Y]||(g[Y]={context:this,instance:new fF[c]}),g[Y].instance[d])?g[Y].instance[d].apply(this,b):void 0},removeInstance:function(Y){delete g[Y]},removeAllInstances:function(){var c=this;Y.each(g,function(g,d){"function"===Y.typeOf(g.instance.destroy)&&g.instance.destroy.call(g.context),c.removeInstance(d)})}}}(),Y.extend(this,{initialized:!1,uid:fU,type:d,mode:b.getMode(a,g.required_caps,fj),shimid:fU+"_container",clients:0,options:g,can:function(g,c){var d=arguments[2]||K;if("string"===Y.typeOf(g)&&"undefined"===Y.typeOf(c)&&(g=b.parseCaps(g)),"object"===Y.typeOf(g)){for(var f in g)if(!this.can(f,g[f],d))return!1;return!0}return"function"===Y.typeOf(d[g])?d[g].call(this,c):c===d[g]},getShimContainer:function(){var g,d=c.get(this.shimid);return d||(g=c.get(this.options.container)||document.body,d=document.createElement("div"),d.id=this.shimid,d.className="moxie-shim moxie-shim-"+this.type,Y.extend(d.style,{position:"absolute",top:"0px",left:"0px",width:"1px",height:"1px",overflow:"hidden"}),g.appendChild(d),g=null),d},getShim:function(){return fF},shimExec:function(g,Y){var c=[].slice.call(arguments,2);return gF.getShim().exec.call(this,this.uid,g,Y,c)},exec:function(g,Y){var c=[].slice.call(arguments,2);return gF[g]&&gF[g][Y]?gF[g][Y].apply(this,c):gF.shimExec.apply(this,arguments)},destroy:function(){if(gF){var g=c.get(this.shimid);g&&g.parentNode.removeChild(g),fF&&fF.removeAllInstances(),this.unbindAll(),delete f[this.uid],this.uid=null,fU=gF=fF=g=null}}}),this.mode&&g.required_caps&&!this.can(g.required_caps)&&(this.mode=!1)}var K={},f={};return b.order="html5,flash,silverlight,html4",b.getRuntime=function(g){return!!f[g]&&f[g]},b.addConstructor=function(g,Y){Y.prototype=d.instance,K[g]=Y},b.getConstructor=function(g){return K[g]||null},b.getInfo=function(g){var Y=b.getRuntime(g);return Y?{uid:Y.uid,type:Y.type,mode:Y.mode,can:function(){return Y.can.apply(Y,arguments)}}:null},b.parseCaps=function(g){var c={};return"string"!==Y.typeOf(g)?g||{}:(Y.each(g.split(","),function(g){c[g]=!0}),c)},b.can=function(g,Y){var c,d,K=b.getConstructor(g);return!!K&&(c=new K({required_caps:Y}),d=c.mode,c.destroy(),!!d)},b.thatCan=function(g,Y){var c=(Y||b.order).split(/\s*,\s*/);for(var d in c)if(b.can(c[d],g))return c[d];return null},b.getMode=function(g,c,d){var b=null;if("undefined"===Y.typeOf(d)&&(d="browser"),c&&!Y.isEmptyObj(g)){if(Y.each(c,function(c,d){if(g.hasOwnProperty(d)){var K=g[d](c);if("string"==typeof K&&(K=[K]),b){if(!(b=Y.arrayIntersect(b,K)))return b=!1}else b=K}}),b)return-1!==Y.inArray(d,b)?d:b[0];if(b===!1)return!1}return d},b.capTrue=function(){return!0},b.capFalse=function(){return!1},b.capTest=function(g){return function(){return!!g}},b}),d("moxie/runtime/RuntimeClient",["moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/Runtime"],function(g,Y,c,d){return function(){var g;c.extend(this,{connectRuntime:function(b){function K(c){var f,bh;return c.length?(f=c.shift().toLowerCase(),(bh=d.getConstructor(f))?(g=new bh(b),g.bind("Init",function(){g.initialized=!0,setTimeout(function(){g.clients++,a.ruid=g.uid,a.trigger("RuntimeInit",g)},1)}),g.bind("Error",function(){g.destroy(),K(c)}),g.bind("Exception",function(g,c){var d=c.name+"(#"+c.code+")"+(c.message?", from: "+c.message:"");a.trigger("RuntimeError",new Y.RuntimeError(Y.RuntimeError.EXCEPTION_ERR,d))}),g.mode?void g.init():void g.trigger("Error")):void K(c)):(a.trigger("RuntimeError",new Y.RuntimeError(Y.RuntimeError.NOT_INIT_ERR)),void(g=null))}var f,a=this;if("string"===c.typeOf(b)?f=b:"string"===c.typeOf(b.ruid)&&(f=b.ruid),f){if(g=d.getRuntime(f))return a.ruid=f,g.clients++,g;throw new Y.RuntimeError(Y.RuntimeError.NOT_INIT_ERR)}K((b.runtime_order||d.order).split(/\s*,\s*/))},disconnectRuntime:function(){g&&--g.clients<=0&&g.destroy(),g=null},getRuntime:function(){return g&&g.uid?g:g=null},exec:function(){return g?g.exec.apply(this,arguments):null},can:function(Y){return!!g&&g.can(Y)}})}}),d("moxie/file/Blob",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient"],function(g,Y,c){function d(K,f){function a(Y,c,K){var f,a=b[this.uid];return"string"===g.typeOf(a)&&a.length?(f=new d(null,{type:K,size:c-Y}),f.detach(a.substr(Y,f.size)),f):null}c.call(this),K&&this.connectRuntime(K),f?"string"===g.typeOf(f)&&(f={data:f}):f={},g.extend(this,{uid:f.uid||g.guid("uid_"),ruid:K,size:f.size||0,type:f.type||"",slice:function(g,Y,c){return this.isDetached()?a.apply(this,arguments):this.getRuntime().exec.call(this,"Blob","slice",this.getSource(),g,Y,c)},getSource:function(){return b[this.uid]?b[this.uid]:null},detach:function(g){if(this.ruid&&(this.getRuntime().exec.call(this,"Blob","destroy"),this.disconnectRuntime(),this.ruid=null),g=g||"","data:"==g.substr(0,5)){var c=g.indexOf(";base64,");this.type=g.substring(5,c),g=Y.atob(g.substring(c+8))}this.size=g.length,b[this.uid]=g},isDetached:function(){return!this.ruid&&"string"===g.typeOf(b[this.uid])},destroy:function(){this.detach(),delete b[this.uid]}}),f.data?this.detach(f.data):b[this.uid]=f}var b={};return d}),d("moxie/core/I18n",["moxie/core/utils/Basic"],function(g){var Y={};return{addI18n:function(c){return g.extend(Y,c)},translate:function(g){return Y[g]||g},_:function(g){return this.translate(g)},sprintf:function(Y){var c=[].slice.call(arguments,1);return Y.replace(/%[a-z]/g,function(){var Y=c.shift();return"undefined"!==g.typeOf(Y)?Y:""})}}}),d("moxie/core/utils/Mime",["moxie/core/utils/Basic","moxie/core/I18n"],function(g,Y){var c="application/msword,doc dot,application/pdf,pdf,application/pgp-signature,pgp,application/postscript,ps ai eps,application/rtf,rtf,application/vnd.ms-excel,xls xlb,application/vnd.ms-powerpoint,ppt pps pot,application/zip,zip,application/x-shockwave-flash,swf swfl,application/vnd.openxmlformats-officedocument.wordprocessingml.document,docx,application/vnd.openxmlformats-officedocument.wordprocessingml.template,dotx,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,xlsx,application/vnd.openxmlformats-officedocument.presentationml.presentation,pptx,application/vnd.openxmlformats-officedocument.presentationml.template,potx,application/vnd.openxmlformats-officedocument.presentationml.slideshow,ppsx,application/x-javascript,js,application/json,json,audio/mpeg,mp3 mpga mpega mp2,audio/x-wav,wav,audio/x-m4a,m4a,audio/ogg,oga ogg,audio/aiff,aiff aif,audio/flac,flac,audio/aac,aac,audio/ac3,ac3,audio/x-ms-wma,wma,image/bmp,bmp,image/gif,gif,image/jpeg,jpg jpeg jpe,image/photoshop,psd,image/png,png,image/svg+xml,svg svgz,image/tiff,tiff tif,text/plain,asc txt text diff log,text/html,htm html xhtml,text/css,css,text/csv,csv,text/rtf,rtf,video/mpeg,mpeg mpg mpe m2v,video/quicktime,qt mov,video/mp4,mp4,video/x-m4v,m4v,video/x-flv,flv,video/x-ms-wmv,wmv,video/avi,avi,video/webm,webm,video/3gpp,3gpp 3gp,video/3gpp2,3g2,video/vnd.rn-realvideo,rv,video/ogg,ogv,video/x-matroska,mkv,application/vnd.oasis.opendocument.formula-template,otf,application/octet-stream,exe",d={mimes:{},extensions:{},addMimeType:function(g){var Y,c,d,b=g.split(/,/);for(Y=0;Y<b.length;Y+=2){for(d=b[Y+1].split(/ /),c=0;c<d.length;c++)this.mimes[d[c]]=b[Y];this.extensions[b[Y]]=d}},extList2mimes:function(Y,c){var d,b,K,f,a=this,bh=[];for(b=0;b<Y.length;b++)for(d=Y[b].extensions.split(/\s*,\s*/),K=0;K<d.length;K++){if("*"===d[K])return[];if(f=a.mimes[d[K]],f&&-1===g.inArray(f,bh)&&bh.push(f),c&&/^\w+$/.test(d[K]))bh.push("."+d[K]);else if(!f)return[]}return bh},mimes2exts:function(Y){var c=this,d=[];return g.each(Y,function(Y){if("*"===Y)return d=[],!1;var b=Y.match(/^(\w+)\/(\*|\w+)$/);b&&("*"===b[2]?g.each(c.extensions,function(g,Y){new RegExp("^"+b[1]+"/").test(Y)&&[].push.apply(d,c.extensions[Y])}):c.extensions[Y]&&[].push.apply(d,c.extensions[Y]))}),d},mimes2extList:function(c){var d=[],b=[];return"string"===g.typeOf(c)&&(c=g.trim(c).split(/\s*,\s*/)),b=this.mimes2exts(c),d.push({title:Y.translate("Files"),extensions:b.length?b.join(","):"*"}),d.mimes=c,d},getFileExtension:function(g){var Y=g&&g.match(/\.([^.]+)$/);return Y?Y[1].toLowerCase():""},getFileMime:function(g){return this.mimes[this.getFileExtension(g)]||""}};return d.addMimeType(c),d}),d("moxie/file/FileInput",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Mime","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/I18n","moxie/runtime/Runtime","moxie/runtime/RuntimeClient"],function(g,Y,c,d,b,K,f,a,bh){function fF(Y){var K,fF,fU;if(-1!==g.inArray(g.typeOf(Y),["string","node"])&&(Y={browse_button:Y}),fF=d.get(Y.browse_button),!fF)throw new b.DOMException(b.DOMException.NOT_FOUND_ERR);fU={accept:[{title:f.translate("All Files"),extensions:"*"}],multiple:!1,required_caps:!1,container:fF.parentNode||document.body},Y=g.extend({},fU,Y),"string"==typeof Y.required_caps&&(Y.required_caps=a.parseCaps(Y.required_caps)),"string"==typeof Y.accept&&(Y.accept=c.mimes2extList(Y.accept)),K=d.get(Y.container),K||(K=document.body),"static"===d.getStyle(K,"position")&&(K.style.position="relative"),K=fF=null,bh.call(this),g.extend(this,{uid:g.guid("uid_"),ruid:null,shimid:null,files:null,init:function(){var c=this;c.bind("RuntimeInit",function(b,K){c.ruid=K.uid,c.shimid=K.shimid,c.bind("Ready",function(){c.trigger("Refresh")},999),c.bind("Refresh",function(){var c,b,f,a,bh;f=d.get(Y.browse_button),a=d.get(K.shimid),f&&(c=d.getPos(f,d.get(Y.container)),b=d.getSize(f),bh=parseInt(d.getStyle(f,"z-index"),10)||0,a&&g.extend(a.style,{top:c.y+"px",left:c.x+"px",width:b.w+"px",height:b.h+"px",zIndex:bh+1})),a=f=null}),K.exec.call(c,"FileInput","init",Y)}),c.connectRuntime(g.extend({},Y,{required_caps:{select_file:!0}}))},getOption:function(g){return Y[g]},setOption:function(g,d){if(Y.hasOwnProperty(g)){var K=Y[g];switch(g){case"accept":"string"==typeof d&&(d=c.mimes2extList(d));break;case"container":case"required_caps":throw new b.FileException(b.FileException.NO_MODIFICATION_ALLOWED_ERR)}Y[g]=d,this.exec("FileInput","setOption",g,d),this.trigger("OptionChanged",g,d,K)}},disable:function(Y){var c=this.getRuntime();c&&this.exec("FileInput","disable","undefined"===g.typeOf(Y)||Y)},refresh:function(){this.trigger("Refresh")},destroy:function(){var Y=this.getRuntime();Y&&(Y.exec.call(this,"FileInput","destroy"),this.disconnectRuntime()),"array"===g.typeOf(this.files)&&g.each(this.files,function(g){g.destroy()}),this.files=null,this.unbindAll()}}),this.handleEventProps(gF)}var gF=["ready","change","cancel","mouseenter","mouseleave","mousedown","mouseup"];return fF.prototype=K.instance,fF}),d("moxie/file/File",["moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/file/Blob"],function(g,Y,c){function d(d,b){b||(b={}),c.apply(this,arguments),this.type||(this.type=Y.getFileMime(b.name));var K;if(b.name)K=b.name.replace(/\\/g,"/"),K=K.substr(K.lastIndexOf("/")+1);else if(this.type){var f=this.type.split("/")[0];K=g.guid((""!==f?f:"file")+"_"),Y.extensions[this.type]&&(K+="."+Y.extensions[this.type][0])}g.extend(this,{name:K||g.guid("file_"),relativePath:"",lastModifiedDate:b.lastModifiedDate||(new Date).toLocaleString()})}return d.prototype=c.prototype,d}),d("moxie/file/FileDrop",["moxie/core/I18n","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/core/utils/Basic","moxie/core/utils/Env","moxie/file/File","moxie/runtime/RuntimeClient","moxie/core/EventTarget","moxie/core/utils/Mime"],function(g,Y,c,d,b,K,f,a,bh){function fF(c){var b,K=this;"string"==typeof c&&(c={drop_zone:c}),b={accept:[{title:g.translate("All Files"),extensions:"*"}],required_caps:{drag_and_drop:!0}},c="object"==typeof c?d.extend({},b,c):b,c.container=Y.get(c.drop_zone)||document.body,"static"===Y.getStyle(c.container,"position")&&(c.container.style.position="relative"),"string"==typeof c.accept&&(c.accept=bh.mimes2extList(c.accept)),f.call(K),d.extend(K,{uid:d.guid("uid_"),ruid:null,files:null,init:function(){K.bind("RuntimeInit",function(g,Y){K.ruid=Y.uid,Y.exec.call(K,"FileDrop","init",c),K.dispatchEvent("ready")}),K.connectRuntime(c)},destroy:function(){var g=this.getRuntime();g&&(g.exec.call(this,"FileDrop","destroy"),this.disconnectRuntime()),this.files=null,this.unbindAll()}}),this.handleEventProps(gF)}var gF=["ready","dragenter","dragleave","drop","error"];return fF.prototype=a.instance,fF}),d("moxie/file/FileReader",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/Exceptions","moxie/core/EventTarget","moxie/file/Blob","moxie/runtime/RuntimeClient"],function(g,Y,c,d,b,K){function f(){function d(g,d){if(this.trigger("loadstart"),this.readyState===f.LOADING)return this.trigger("error",new c.DOMException(c.DOMException.INVALID_STATE_ERR)),void this.trigger("loadend");if(!(d instanceof b))return this.trigger("error",new c.DOMException(c.DOMException.NOT_FOUND_ERR)),void this.trigger("loadend");if(this.result=null,this.readyState=f.LOADING,d.isDetached()){var K=d.getSource();switch(g){case"readAsText":case"readAsBinaryString":this.result=K;break;case"readAsDataURL":this.result="data:"+d.type+";base64,"+Y.btoa(K)}this.readyState=f.DONE,this.trigger("load"),this.trigger("loadend")}else this.connectRuntime(d.ruid),this.exec("FileReader","read",g,d)}K.call(this),g.extend(this,{uid:g.guid("uid_"),readyState:f.EMPTY,result:null,error:null,readAsBinaryString:function(g){d.call(this,"readAsBinaryString",g)},readAsDataURL:function(g){d.call(this,"readAsDataURL",g)},readAsText:function(g){d.call(this,"readAsText",g)},abort:function(){this.result=null,-1===g.inArray(this.readyState,[f.EMPTY,f.DONE])&&(this.readyState===f.LOADING&&(this.readyState=f.DONE),this.exec("FileReader","abort"),this.trigger("abort"),this.trigger("loadend"))},destroy:function(){this.abort(),this.exec("FileReader","destroy"),this.disconnectRuntime(),this.unbindAll()}}),this.handleEventProps(a),this.bind("Error",function(g,Y){this.readyState=f.DONE,this.error=Y},999),this.bind("Load",function(){this.readyState=f.DONE},999)}var a=["loadstart","progress","load","abort","error","loadend"];return f.EMPTY=0,f.LOADING=1,f.DONE=2,f.prototype=d.instance,f}),d("moxie/core/utils/Url",[],function(){var g=function(Y,c){for(var d=["source","scheme","authority","userInfo","user","pass","host","port","relative","path","directory","file","query","fragment"],b=d.length,K={http:80,https:443},f={},a=/^(?:([^:\/?#]+):)?(?:\/\/()(?:(?:()(?:([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?))?()(?:(()(?:(?:[^?#\/]*\/)*)()(?:[^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/,bh=a.exec(Y||"");b--;)bh[b]&&(f[d[b]]=bh[b]);if(!f.scheme){c&&"string"!=typeof c||(c=g(c||document.location.href)),f.scheme=c.scheme,f.host=c.host,f.port=c.port;var fF="";/^[^\/]/.test(f.path)&&(fF=c.path,fF=/\/[^\/]*\.[^\/]*$/.test(fF)?fF.replace(/\/[^\/]+$/,"/"):fF.replace(/\/?$/,"/")),f.path=fF+(f.path||"")}return f.port||(f.port=K[f.scheme]||80),f.port=parseInt(f.port,10),f.path||(f.path="/"),delete f.source,f},Y=function(Y){var c={http:80,https:443},d="object"==typeof Y?Y:g(Y);return d.scheme+"://"+d.host+(d.port!==c[d.scheme]?":"+d.port:"")+d.path+(d.query?d.query:"")},c=function(Y){function c(g){return[g.scheme,g.host,g.port].join("/")}return"string"==typeof Y&&(Y=g(Y)),c(g())===c(Y)};return{parseUrl:g,resolveUrl:Y,hasSameOrigin:c}}),d("moxie/runtime/RuntimeTarget",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(g,Y,c){function d(){this.uid=g.guid("uid_"),Y.call(this),this.destroy=function(){this.disconnectRuntime(),this.unbindAll()}}return d.prototype=c.instance,d}),d("moxie/file/FileReaderSync",["moxie/core/utils/Basic","moxie/runtime/RuntimeClient","moxie/core/utils/Encode"],function(g,Y,c){return function(){function d(g,Y){if(!Y.isDetached()){var d=this.connectRuntime(Y.ruid).exec.call(this,"FileReaderSync","read",g,Y);return this.disconnectRuntime(),d}var b=Y.getSource();switch(g){case"readAsBinaryString":return b;case"readAsDataURL":return"data:"+Y.type+";base64,"+c.btoa(b);case"readAsText":for(var K="",f=0,a=b.length;a>f;f++)K+=String.fromCharCode(b[f]);return K}}Y.call(this),g.extend(this,{uid:g.guid("uid_"),readAsBinaryString:function(g){return d.call(this,"readAsBinaryString",g)},readAsDataURL:function(g){return d.call(this,"readAsDataURL",g)},readAsText:function(g){return d.call(this,"readAsText",g)}})}}),d("moxie/xhr/FormData",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/file/Blob"],function(g,Y,c){function d(){var g,d=[];Y.extend(this,{append:function(b,K){var f=this,a=Y.typeOf(K);K instanceof c?g={name:b,value:K}:"array"===a?(b+="[]",Y.each(K,function(g){f.append(b,g)})):"object"===a?Y.each(K,function(g,Y){f.append(b+"["+Y+"]",g)}):"null"===a||"undefined"===a||"number"===a&&isNaN(K)?f.append(b,"false"):d.push({name:b,value:K.toString()})},hasBlob:function(){return!!this.getBlob()},getBlob:function(){return g&&g.value||null},getBlobName:function(){return g&&g.name||null},each:function(c){Y.each(d,function(g){c(g.value,g.name)}),g&&c(g.value,g.name)},destroy:function(){g=null,d=[]}})}return d}),d("moxie/xhr/XMLHttpRequest",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/EventTarget","moxie/core/utils/Encode","moxie/core/utils/Url","moxie/runtime/Runtime","moxie/runtime/RuntimeTarget","moxie/file/Blob","moxie/file/FileReaderSync","moxie/xhr/FormData","moxie/core/utils/Env","moxie/core/utils/Mime"],function(g,Y,c,d,b,K,f,a,bh,fF,gF,fU){function fj(){this.uid=g.guid("uid_")}function h(){function c(g,Y){return cG.hasOwnProperty(g)?1===arguments.length?gF.can("define_property")?cG[g]:gi[g]:void(gF.can("define_property")?cG[g]=Y:gi[g]=Y):void 0}function bh(Y){function d(){fE&&(fE.destroy(),fE=null),a.dispatchEvent("loadend"),a=null}function b(b){fE.bind("LoadStart",function(g){c("readyState",h.LOADING),a.dispatchEvent("readystatechange"),a.dispatchEvent(g),ba&&a.upload.dispatchEvent(g)}),fE.bind("Progress",function(g){c("readyState")!==h.LOADING&&(c("readyState",h.LOADING),a.dispatchEvent("readystatechange")),a.dispatchEvent(g)}),fE.bind("UploadProgress",function(g){ba&&a.upload.dispatchEvent({type:"progress",lengthComputable:!1,total:g.total,loaded:g.loaded})}),fE.bind("Load",function(Y){c("readyState",h.DONE),c("status",Number(b.exec.call(fE,"XMLHttpRequest","getStatus")||0)),c("statusText",bd[c("status")]||""),c("response",b.exec.call(fE,"XMLHttpRequest","getResponse",c("responseType"))),~g.inArray(c("responseType"),["text",""])?c("responseText",c("response")):"document"===c("responseType")&&c("responseXML",c("response")),n=b.exec.call(fE,"XMLHttpRequest","getAllResponseHeaders"),a.dispatchEvent("readystatechange"),c("status")>0?(ba&&a.upload.dispatchEvent(Y),a.dispatchEvent(Y)):(i=!0,a.dispatchEvent("error")),d()}),fE.bind("Abort",function(g){a.dispatchEvent(g),d()}),fE.bind("Error",function(g){i=!0,c("readyState",h.DONE),a.dispatchEvent("readystatechange"),c_=!0,a.dispatchEvent(g),d()}),b.exec.call(fE,"XMLHttpRequest","send",{url:gV,method:bB,async:gb,user:bQ,password:cj,headers:bhb,mimeType:e,encoding:T,responseType:a.responseType,withCredentials:a.withCredentials,options:m},Y)}var a=this;cb=(new Date).getTime(),fE=new f,"string"==typeof m.required_caps&&(m.required_caps=K.parseCaps(m.required_caps)),m.required_caps=g.extend({},m.required_caps,{return_response_type:a.responseType}),Y instanceof fF&&(m.required_caps.send_multipart=!0),g.isEmptyObj(bhb)||(m.required_caps.send_custom_headers=!0),j||(m.required_caps.do_cors=!0),m.ruid?b(fE.connectRuntime(m)):(fE.bind("RuntimeInit",function(g,Y){b(Y)}),fE.bind("RuntimeError",function(g,Y){a.dispatchEvent("RuntimeError",Y)}),fE.connectRuntime(m))}function bR(){c("responseText",""),c("responseXML",null),c("response",null),c("status",0),c("statusText",""),cb=gJ=null}var gV,bB,bQ,cj,cb,gJ,fE,ag,gi=this,cG={timeout:0,readyState:h.UNSENT,withCredentials:!1,status:0,statusText:"",responseType:"",responseXML:null,responseText:null,response:null},gb=!0,bhb={},T=null,e=null,af=!1,Kh=!1,ba=!1,c_=!1,i=!1,j=!1,k=null,l=null,m={},n="";g.extend(this,cG,{uid:g.guid("uid_"),upload:new fj,open:function(K,f,a,bh,fF){var gF;if(!K||!f)throw new Y.DOMException(Y.DOMException.SYNTAX_ERR);if(/[\u0100-\uffff]/.test(K)||d.utf8_encode(K)!==K)throw new Y.DOMException(Y.DOMException.SYNTAX_ERR);if(~g.inArray(K.toUpperCase(),["CONNECT","DELETE","GET","HEAD","OPTIONS","POST","PUT","TRACE","TRACK"])&&(bB=K.toUpperCase()),~g.inArray(bB,["CONNECT","TRACE","TRACK"]))throw new Y.DOMException(Y.DOMException.SECURITY_ERR);if(f=d.utf8_encode(f),gF=b.parseUrl(f),j=b.hasSameOrigin(gF),gV=b.resolveUrl(f),(bh||fF)&&!j)throw new Y.DOMException(Y.DOMException.INVALID_ACCESS_ERR);if(bQ=bh||gF.user,cj=fF||gF.pass,gb=a||!0,gb===!1&&(c("timeout")||c("withCredentials")||""!==c("responseType")))throw new Y.DOMException(Y.DOMException.INVALID_ACCESS_ERR);af=!gb,Kh=!1,bhb={},bR.call(this),c("readyState",h.OPENED),this.dispatchEvent("readystatechange")},setRequestHeader:function(b,K){var f=["accept-charset","accept-encoding","access-control-request-headers","access-control-request-method","connection","content-length","cookie","cookie2","content-transfer-encoding","date","expect","host","keep-alive","origin","referer","te","trailer","transfer-encoding","upgrade","user-agent","via"];if(c("readyState")!==h.OPENED||Kh)throw new Y.DOMException(Y.DOMException.INVALID_STATE_ERR);if(/[\u0100-\uffff]/.test(b)||d.utf8_encode(b)!==b)throw new Y.DOMException(Y.DOMException.SYNTAX_ERR);return b=g.trim(b).toLowerCase(),!~g.inArray(b,f)&&!/^(proxy\-|sec\-)/.test(b)&&(bhb[b]?bhb[b]+=", "+K:bhb[b]=K,!0)},hasRequestHeader:function(g){return g&&bhb[g.toLowerCase()]||!1},getAllResponseHeaders:function(){return n||""},getResponseHeader:function(Y){return Y=Y.toLowerCase(),i||~g.inArray(Y,["set-cookie","set-cookie2"])?null:n&&""!==n&&(ag||(ag={},g.each(n.split(/\r\n/),function(Y){var c=Y.split(/:\s+/);2===c.length&&(c[0]=g.trim(c[0]),ag[c[0].toLowerCase()]={header:c[0],value:g.trim(c[1])})})),ag.hasOwnProperty(Y))?ag[Y].header+": "+ag[Y].value:null},overrideMimeType:function(d){var b,K;if(~g.inArray(c("readyState"),[h.LOADING,h.DONE]))throw new Y.DOMException(Y.DOMException.INVALID_STATE_ERR);if(d=g.trim(d.toLowerCase()),/;/.test(d)&&(b=d.match(/^([^;]+)(?:;\scharset\=)?(.*)$/))&&(d=b[1],b[2]&&(K=b[2])),!fU.mimes[d])throw new Y.DOMException(Y.DOMException.SYNTAX_ERR);k=d,l=K},send:function(c,b){if(m="string"===g.typeOf(b)?{ruid:b}:b?b:{},this.readyState!==h.OPENED||Kh)throw new Y.DOMException(Y.DOMException.INVALID_STATE_ERR);if(c instanceof a)m.ruid=c.ruid,e=c.type||"application/octet-stream";else if(c instanceof fF){if(c.hasBlob()){var K=c.getBlob();m.ruid=K.ruid,e=K.type||"application/octet-stream"}}else"string"==typeof c&&(T="UTF-8",e="text/plain;charset=UTF-8",c=d.utf8_encode(c));this.withCredentials||(this.withCredentials=m.required_caps&&m.required_caps.send_browser_cookies&&!j),ba=!af&&this.upload.hasEventListener(),i=!1,c_=!c,af||(Kh=!0),bh.call(this,c)},abort:function(){if(i=!0,af=!1,~g.inArray(c("readyState"),[h.UNSENT,h.OPENED,h.DONE]))c("readyState",h.UNSENT);else{if(c("readyState",h.DONE),Kh=!1,!fE)throw new Y.DOMException(Y.DOMException.INVALID_STATE_ERR);fE.getRuntime().exec.call(fE,"XMLHttpRequest","abort",c_),c_=!0}},destroy:function(){fE&&("function"===g.typeOf(fE.destroy)&&fE.destroy(),fE=null),this.unbindAll(),this.upload&&(this.upload.unbindAll(),this.upload=null)}}),this.handleEventProps(U.concat(["readystatechange"])),this.upload.handleEventProps(U)}var bd={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"Reserved",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request-URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",426:"Upgrade Required",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",510:"Not Extended"};fj.prototype=c.instance;var U=["loadstart","progress","abort","error","load","timeout","loadend"];return h.UNSENT=0,h.OPENED=1,h.HEADERS_RECEIVED=2,h.LOADING=3,h.DONE=4,h.prototype=c.instance,h}),d("moxie/runtime/Transporter",["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/runtime/RuntimeClient","moxie/core/EventTarget"],function(g,Y,c,d){function b(){function d(){gF=fU=0,fF=this.result=null}function K(Y,c){var d=this;bh=c,d.bind("TransportingProgress",function(Y){fU=Y.loaded,gF>fU&&-1===g.inArray(d.state,[b.IDLE,b.DONE])&&f.call(d)},999),d.bind("TransportingComplete",function(){fU=gF,d.state=b.DONE,fF=null,d.result=bh.exec.call(d,"Transporter","getAsBlob",Y||"")},999),d.state=b.BUSY,d.trigger("TransportingStarted"),f.call(d)}function f(){var g,c=this,d=gF-fU;fj>d&&(fj=d),g=Y.btoa(fF.substr(fU,fj)),bh.exec.call(c,"Transporter","receive",g,gF)}var a,bh,fF,gF,fU,fj;c.call(this),g.extend(this,{uid:g.guid("uid_"),state:b.IDLE,result:null,transport:function(Y,c,b){var f=this;if(b=g.extend({chunk_size:204798},b),(a=b.chunk_size%3)&&(b.chunk_size+=3-a),fj=b.chunk_size,d.call(this),fF=Y,gF=Y.length,"string"===g.typeOf(b)||b.ruid)K.call(f,c,this.connectRuntime(b));else{var bh=function(g,Y){f.unbind("RuntimeInit",bh),K.call(f,c,Y)};this.bind("RuntimeInit",bh),this.connectRuntime(b)}},abort:function(){var g=this;g.state=b.IDLE,bh&&(bh.exec.call(g,"Transporter","clear"),g.trigger("TransportingAborted")),d.call(g)},destroy:function(){this.unbindAll(),bh=null,this.disconnectRuntime(),d.call(this)}})}return b.IDLE=0,b.BUSY=1,b.DONE=2,b.prototype=d.instance,b}),d("moxie/image/Image",["moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/file/FileReaderSync","moxie/xhr/XMLHttpRequest","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/runtime/Transporter","moxie/core/utils/Env","moxie/core/EventTarget","moxie/file/Blob","moxie/file/File","moxie/core/utils/Encode"],function(g,Y,c,d,b,K,f,a,bh,fF,gF,fU,fj){function h(){function d(g){try{return g||(g=this.exec("Image","getInfo")),this.size=g.size,this.width=g.width,this.height=g.height,this.type=g.type,this.meta=g.meta,""===this.name&&(this.name=g.name),!0}catch(g){return this.trigger("error",g.code),!1}}function fF(Y){var d=g.typeOf(Y);try{if(Y instanceof h){if(!Y.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);U.apply(this,arguments)}else if(Y instanceof gF){if(!~g.inArray(Y.type,["image/jpeg","image/png"]))throw new c.ImageError(c.ImageError.WRONG_FORMAT);bR.apply(this,arguments)}else if(-1!==g.inArray(d,["blob","file"]))fF.call(this,new fU(null,Y),arguments[1]);else if("string"===d)"data:"===Y.substr(0,5)?fF.call(this,new gF(null,{data:Y}),arguments[1]):gV.apply(this,arguments);else{if("node"!==d||"img"!==Y.nodeName.toLowerCase())throw new c.DOMException(c.DOMException.TYPE_MISMATCH_ERR);fF.call(this,Y.src,arguments[1])}}catch(g){this.trigger("error",g.code)}}function U(Y,c){var d=this.connectRuntime(Y.ruid);this.ruid=d.uid,d.exec.call(this,"Image","loadFromImage",Y,"undefined"===g.typeOf(c)||c)}function bR(Y,c){function d(g){b.ruid=g.uid,g.exec.call(b,"Image","loadFromBlob",Y)}var b=this;b.name=Y.name||"",Y.isDetached()?(this.bind("RuntimeInit",function(g,Y){d(Y)}),c&&"string"==typeof c.required_caps&&(c.required_caps=K.parseCaps(c.required_caps)),this.connectRuntime(g.extend({required_caps:{access_image_binary:!0,resize_image:!0}},c))):d(this.connectRuntime(Y.ruid))}function gV(g,Y){var c,d=this;c=new b,c.open("get",g),c.responseType="blob",c.onprogress=function(g){d.trigger(g)},c.onload=function(){bR.call(d,c.response,!0)},c.onerror=function(g){d.trigger(g)},c.onloadend=function(){c.destroy()},c.bind("RuntimeError",function(g,Y){d.trigger("RuntimeError",Y)}),c.send(null,Y)}f.call(this),g.extend(this,{uid:g.guid("uid_"),ruid:null,name:"",size:0,width:0,height:0,type:"",meta:{},clone:function(){this.load.apply(this,arguments)},load:function(){fF.apply(this,arguments)},resize:function(Y){var d,b,K=this,f={x:0,y:0,width:K.width,height:K.height},a=g.extendIf({width:K.width,height:K.height,type:K.type||"image/jpeg",quality:90,crop:!1,fit:!0,preserveHeaders:!0,resample:"default",multipass:!0},Y);try{if(!K.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);if(K.width>h.MAX_RESIZE_WIDTH||K.height>h.MAX_RESIZE_HEIGHT)throw new c.ImageError(c.ImageError.MAX_RESOLUTION_ERR);if(d=K.meta&&K.meta.tiff&&K.meta.tiff.Orientation||1,-1!==g.inArray(d,[5,6,7,8])){var bh=a.width;a.width=a.height,a.height=bh}if(a.crop){switch(b=Math.max(a.width/K.width,a.height/K.height),Y.fit?(f.width=Math.min(Math.ceil(a.width/b),K.width),f.height=Math.min(Math.ceil(a.height/b),K.height),b=a.width/f.width):(f.width=Math.min(a.width,K.width),f.height=Math.min(a.height,K.height),b=1),"boolean"==typeof a.crop&&(a.crop="cc"),a.crop.toLowerCase().replace(/_/,"-")){case"rb":case"right-bottom":f.x=K.width-f.width,f.y=K.height-f.height;break;case"cb":case"center-bottom":f.x=Math.floor((K.width-f.width)/2),f.y=K.height-f.height;break;case"lb":case"left-bottom":f.x=0,f.y=K.height-f.height;break;case"lt":case"left-top":f.x=0,f.y=0;break;case"ct":case"center-top":f.x=Math.floor((K.width-f.width)/2),f.y=0;break;case"rt":case"right-top":f.x=K.width-f.width,f.y=0;break;case"rc":case"right-center":case"right-middle":f.x=K.width-f.width,f.y=Math.floor((K.height-f.height)/2);break;case"lc":case"left-center":case"left-middle":f.x=0,f.y=Math.floor((K.height-f.height)/2);break;case"cc":case"center-center":case"center-middle":default:f.x=Math.floor((K.width-f.width)/2),f.y=Math.floor((K.height-f.height)/2)}f.x=Math.max(f.x,0),f.y=Math.max(f.y,0)}else b=Math.min(a.width/K.width,a.height/K.height);this.exec("Image","resize",f,b,a)}catch(g){K.trigger("error",g.code)}},downsize:function(Y){var c,d={width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90,crop:!1,preserveHeaders:!0,resample:"default"};c="object"==typeof Y?g.extend(d,Y):g.extend(d,{width:arguments[0],height:arguments[1],crop:arguments[2],preserveHeaders:arguments[3]}),this.resize(c)},crop:function(g,Y,c){this.downsize(g,Y,!0,c)},getAsCanvas:function(){if(!bh.can("create_canvas"))throw new c.RuntimeError(c.RuntimeError.NOT_SUPPORTED_ERR);var g=this.connectRuntime(this.ruid);return g.exec.call(this,"Image","getAsCanvas")},getAsBlob:function(g,Y){if(!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsBlob",g||"image/jpeg",Y||90)},getAsDataURL:function(g,Y){if(!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);return this.exec("Image","getAsDataURL",g||"image/jpeg",Y||90)},getAsBinaryString:function(g,Y){var c=this.getAsDataURL(g,Y);return fj.atob(c.substring(c.indexOf("base64,")+7))},embed:function(d,b){function K(Y,b){var K=this;if(bh.can("create_canvas")){var gF=K.getAsCanvas();if(gF)return d.appendChild(gF),gF=null,K.destroy(),void fF.trigger("embedded")}var fU=K.getAsDataURL(Y,b);if(!fU)throw new c.ImageError(c.ImageError.WRONG_FORMAT);if(bh.can("use_data_uri_of",fU.length))d.innerHTML='<img src="'+fU+'" width="'+K.width+'" height="'+K.height+'" />',K.destroy(),fF.trigger("embedded");else{var h=new a;h.bind("TransportingComplete",function(){f=fF.connectRuntime(this.result.ruid),fF.bind("Embedded",function(){g.extend(f.getShimContainer().style,{top:"0px",left:"0px",width:K.width+"px",height:K.height+"px"}),f=null},999),f.exec.call(fF,"ImageView","display",this.result.uid,width,height),K.destroy()}),h.transport(fj.atob(fU.substring(fU.indexOf("base64,")+7)),Y,{required_caps:{display_media:!0},runtime_order:"flash,silverlight",container:d})}}var f,fF=this,gF=g.extend({width:this.width,height:this.height,type:this.type||"image/jpeg",quality:90},b);try{if(!(d=Y.get(d)))throw new c.DOMException(c.DOMException.INVALID_NODE_TYPE_ERR);if(!this.size)throw new c.DOMException(c.DOMException.INVALID_STATE_ERR);this.width>h.MAX_RESIZE_WIDTH||this.height>h.MAX_RESIZE_HEIGHT;var fU=new h;return fU.bind("Resize",function(){K.call(this,gF.type,gF.quality)}),fU.bind("Load",function(){fU.downsize(gF)}),this.meta.thumb&&this.meta.thumb.width>=gF.width&&this.meta.thumb.height>=gF.height?fU.load(this.meta.thumb.data):fU.clone(this,!1),fU}catch(g){this.trigger("error",g.code)}},destroy:function(){this.ruid&&(this.getRuntime().exec.call(this,"Image","destroy"),this.disconnectRuntime()),this.unbindAll()}}),this.handleEventProps(bd),this.bind("Load Resize",function(){return d.call(this)},999)}var bd=["progress","load","error","resize","embedded"];return h.MAX_RESIZE_WIDTH=8192,h.MAX_RESIZE_HEIGHT=8192,h.prototype=fF.instance,h}),d("moxie/runtime/html5/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(g,Y,c,d){function K(Y){var K=this,bh=c.capTest,fF=c.capTrue,gF=g.extend({access_binary:bh(window.FileReader||window.File&&window.File.getAsDataURL),access_image_binary:function(){return K.can("access_binary")&&!!a.Image},display_media:bh((d.can("create_canvas")||d.can("use_data_uri_over32kb"))&&b("moxie/image/Image")),do_cors:bh(window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest),drag_and_drop:bh(function(){var g=document.createElement("div");return("draggable"in g||"ondragstart"in g&&"ondrop"in g)&&("IE"!==d.browser||d.verComp(d.version,9,">"))}()),filter_by_extension:bh(function(){return!("Chrome"===d.browser&&d.verComp(d.version,28,"<")||"IE"===d.browser&&d.verComp(d.version,10,"<")||"Safari"===d.browser&&d.verComp(d.version,7,"<")||"Firefox"===d.browser&&d.verComp(d.version,37,"<"))}()),return_response_headers:fF,return_response_type:function(g){return!("json"!==g||!window.JSON)||d.can("return_response_type",g)},return_status_code:fF,report_upload_progress:bh(window.XMLHttpRequest&&(new XMLHttpRequest).upload),resize_image:function(){return K.can("access_binary")&&d.can("create_canvas")},select_file:function(){return d.can("use_fileinput")&&window.File},select_folder:function(){return K.can("select_file")&&("Chrome"===d.browser&&d.verComp(d.version,21,">=")||"Firefox"===d.browser&&d.verComp(d.version,42,">="))},select_multiple:function(){return!(!K.can("select_file")||"Safari"===d.browser&&"Windows"===d.os||"iOS"===d.os&&d.verComp(d.osVersion,"7.0.0",">")&&d.verComp(d.osVersion,"8.0.0","<"))},send_binary_string:bh(window.XMLHttpRequest&&((new XMLHttpRequest).sendAsBinary||window.Uint8Array&&window.ArrayBuffer)),send_custom_headers:bh(window.XMLHttpRequest),send_multipart:function(){return!!(window.XMLHttpRequest&&(new XMLHttpRequest).upload&&window.FormData)||K.can("send_binary_string")},slice_blob:bh(window.File&&(File.prototype.mozSlice||File.prototype.webkitSlice||File.prototype.slice)),stream_upload:function(){return K.can("slice_blob")&&K.can("send_multipart")},summon_file_dialog:function(){return K.can("select_file")&&("Firefox"===d.browser&&d.verComp(d.version,4,">=")||"Opera"===d.browser&&d.verComp(d.version,12,">=")||"IE"===d.browser&&d.verComp(d.version,10,">=")||!!~g.inArray(d.browser,["Chrome","Safari","Edge"]))},upload_filesize:fF,use_http_method:fF},arguments[2]);c.call(this,Y,arguments[1]||f,gF),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(g){return function(){g.call(K),g=K=null}}(this.destroy)}),g.extend(this.getShim(),a)}var f="html5",a={};return c.addConstructor(f,K),a}),d("moxie/runtime/html5/file/Blob",["moxie/runtime/html5/Runtime","moxie/file/Blob"],function(g,Y){function c(){function g(g,Y,c){var d;if(!window.File.prototype.slice)return(d=window.File.prototype.webkitSlice||window.File.prototype.mozSlice)?d.call(g,Y,c):null;try{return g.slice(),g.slice(Y,c)}catch(d){return g.slice(Y,c-Y)}}this.slice=function(){return new Y(this.getRuntime().uid,g.apply(this,arguments))}}return g.Blob=c}),d("moxie/core/utils/Events",["moxie/core/utils/Basic"],function(g){function Y(){this.returnValue=!1}function c(){this.cancelBubble=!0}var d={},b="moxie_"+g.guid(),K=function(K,f,a,bh){var fF,gF;f=f.toLowerCase(),K.addEventListener?(fF=a,K.addEventListener(f,fF,!1)):K.attachEvent&&(fF=function(){var g=window.event;g.target||(g.target=g.srcElement),g.preventDefault=Y,g.stopPropagation=c,a(g)},K.attachEvent("on"+f,fF)),K[b]||(K[b]=g.guid()),d.hasOwnProperty(K[b])||(d[K[b]]={}),gF=d[K[b]],gF.hasOwnProperty(f)||(gF[f]=[]),gF[f].push({func:fF,orig:a,key:bh})},f=function(Y,c,K){var f,a;if(c=c.toLowerCase(),Y[b]&&d[Y[b]]&&d[Y[b]][c]){f=d[Y[b]][c];for(var bh=f.length-1;bh>=0&&(f[bh].orig!==K&&f[bh].key!==K||(Y.removeEventListener?Y.removeEventListener(c,f[bh].func,!1):Y.detachEvent&&Y.detachEvent("on"+c,f[bh].func),f[bh].orig=null,f[bh].func=null,f.splice(bh,1),K===a));bh--);if(f.length||delete d[Y[b]][c],g.isEmptyObj(d[Y[b]])){delete d[Y[b]];try{delete Y[b]}catch(g){Y[b]=a}}}},a=function(Y,c){Y&&Y[b]&&g.each(d[Y[b]],function(g,d){f(Y,d,c)})};return{addEvent:K,removeEvent:f,removeAllEvents:a}}),d("moxie/runtime/html5/file/FileInput",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(g,Y,c,d,b,K,f){function a(){var g,a;c.extend(this,{init:function(bh){var fF,gF,fU,fj,h,bd,U=this,bR=U.getRuntime();g=bh,fU=g.accept.mimes||K.extList2mimes(g.accept,bR.can("filter_by_extension")),gF=bR.getShimContainer(),gF.innerHTML='<input id="'+bR.uid+'" type="file" style="font-size:999px;opacity:0;"'+(g.multiple&&bR.can("select_multiple")?"multiple":"")+(g.directory&&bR.can("select_folder")?"webkitdirectory directory":"")+(fU?' accept="'+fU.join(",")+'"':"")+" />",fF=d.get(bR.uid),c.extend(fF.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),fj=d.get(g.browse_button),a=d.getStyle(fj,"z-index")||"auto",bR.can("summon_file_dialog")&&("static"===d.getStyle(fj,"position")&&(fj.style.position="relative"),b.addEvent(fj,"click",function(g){var Y=d.get(bR.uid);Y&&!Y.disabled&&Y.click(),g.preventDefault()},U.uid),U.bind("Refresh",function(){h=parseInt(a,10)||1,d.get(g.browse_button).style.zIndex=h,this.getRuntime().getShimContainer().style.zIndex=h-1})),bd=bR.can("summon_file_dialog")?fj:gF,b.addEvent(bd,"mouseover",function(){U.trigger("mouseenter")},U.uid),b.addEvent(bd,"mouseout",function(){U.trigger("mouseleave")},U.uid),b.addEvent(bd,"mousedown",function(){U.trigger("mousedown")},U.uid),b.addEvent(d.get(g.container),"mouseup",function(){U.trigger("mouseup")},U.uid),fF.onchange=function d(){if(U.files=[],c.each(this.files,function(c){var d="";return!(!g.directory||"."!=c.name)||(c.webkitRelativePath&&(d="/"+c.webkitRelativePath.replace(/^\//,"")),c=new Y(bR.uid,c),c.relativePath=d,void U.files.push(c))}),"IE"!==f.browser&&"IEMobile"!==f.browser)this.value="";else{var b=this.cloneNode(!0);this.parentNode.replaceChild(b,this),b.onchange=d}U.files.length&&U.trigger("change")},U.trigger({type:"ready",async:!0}),gF=null},setOption:function(g,Y){var c=this.getRuntime(),b=d.get(c.uid);switch(g){case"accept":if(Y){var f=Y.mimes||K.extList2mimes(Y,c.can("filter_by_extension"));b.setAttribute("accept",f.join(","))}else b.removeAttribute("accept");break;case"directory":Y&&c.can("select_folder")?(b.setAttribute("directory",""),b.setAttribute("webkitdirectory","")):(b.removeAttribute("directory"),b.removeAttribute("webkitdirectory"));break;case"multiple":Y&&c.can("select_multiple")?b.setAttribute("multiple",""):b.removeAttribute("multiple")}},disable:function(g){var Y,c=this.getRuntime();(Y=d.get(c.uid))&&(Y.disabled=!!g)},destroy:function(){var Y=this.getRuntime(),c=Y.getShim(),K=Y.getShimContainer(),f=g&&d.get(g.container),bh=g&&d.get(g.browse_button);f&&b.removeAllEvents(f,this.uid),bh&&(b.removeAllEvents(bh,this.uid),bh.style.zIndex=a),K&&(b.removeAllEvents(K,this.uid),K.innerHTML=""),c.removeInstance(this.uid),g=K=f=bh=c=null}})}return g.FileInput=a}),d("moxie/runtime/html5/file/FileDrop",["moxie/runtime/html5/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime"],function(g,Y,c,d,b,K){function f(){function g(g){if(!g.dataTransfer||!g.dataTransfer.types)return!1;var Y=c.toArray(g.dataTransfer.types||[]);return-1!==c.inArray("Files",Y)||-1!==c.inArray("public.file-url",Y)||-1!==c.inArray("application/x-moz-file",Y)}function f(g,c){if(bh(g)){var d=new Y(bd,g);d.relativePath=c||"",U.push(d)}}function a(g){for(var Y=[],d=0;d<g.length;d++)[].push.apply(Y,g[d].extensions.split(/\s*,\s*/));return-1===c.inArray("*",Y)?Y:[]}function bh(g){if(!bR.length)return!0;var Y=K.getFileExtension(g.name);return!Y||-1!==c.inArray(Y,bR)}function fF(g,Y){var d=[];c.each(g,function(g){var Y=g.webkitGetAsEntry();Y&&(Y.isFile?f(g.getAsFile(),Y.fullPath):d.push(Y))}),d.length?gF(d,Y):Y()}function gF(g,Y){var d=[];c.each(g,function(g){d.push(function(Y){fU(g,Y)})}),c.inSeries(d,function(){Y()})}function fU(g,Y){g.isFile?g.file(function(c){f(c,g.fullPath),Y()},function(){Y()}):g.isDirectory?fj(g,Y):Y()}function fj(g,Y){function c(g){b.readEntries(function(Y){Y.length?([].push.apply(d,Y),c(g)):g()},g)}var d=[],b=g.createReader();c(function(){gF(d,Y)})}var h,bd,U=[],bR=[];c.extend(this,{init:function(Y){var d,K=this;h=Y,bd=K.ruid,bR=a(h.accept),d=h.container,b.addEvent(d,"dragover",function(Y){g(Y)&&(Y.preventDefault(),Y.dataTransfer.dropEffect="copy")},K.uid),b.addEvent(d,"drop",function(Y){g(Y)&&(Y.preventDefault(),U=[],Y.dataTransfer.items&&Y.dataTransfer.items[0].webkitGetAsEntry?fF(Y.dataTransfer.items,function(){K.files=U,K.trigger("drop")}):(c.each(Y.dataTransfer.files,function(g){f(g)}),K.files=U,K.trigger("drop")))},K.uid),b.addEvent(d,"dragenter",function(){K.trigger("dragenter")},K.uid),b.addEvent(d,"dragleave",function(){K.trigger("dragleave")},K.uid)},destroy:function(){b.removeAllEvents(h&&d.get(h.container),this.uid),bd=U=bR=h=null}})}return g.FileDrop=f}),d("moxie/runtime/html5/file/FileReader",["moxie/runtime/html5/Runtime","moxie/core/utils/Encode","moxie/core/utils/Basic"],function(g,Y,c){function d(){function g(g){return Y.atob(g.substring(g.indexOf("base64,")+7))}var d,b=!1;c.extend(this,{read:function(Y,K){var f=this;f.result="",d=new window.FileReader,d.addEventListener("progress",function(g){f.trigger(g)}),d.addEventListener("load",function(Y){f.result=b?g(d.result):d.result,f.trigger(Y)}),d.addEventListener("error",function(g){f.trigger(g,d.error)}),d.addEventListener("loadend",function(g){d=null,f.trigger(g)}),"function"===c.typeOf(d[Y])?(b=!1,d[Y](K.getSource())):"readAsBinaryString"===Y&&(b=!0,d.readAsDataURL(K.getSource()))},abort:function(){d&&d.abort()},destroy:function(){d=null}})}return g.FileReader=d}),d("moxie/runtime/html5/xhr/XMLHttpRequest",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/utils/Mime","moxie/core/utils/Url","moxie/file/File","moxie/file/Blob","moxie/xhr/FormData","moxie/core/Exceptions","moxie/core/utils/Env"],function(g,Y,c,d,b,K,f,a,bh){function fF(){function g(g,Y){var c,d,b=this;c=Y.getBlob().getSource(),d=new window.FileReader,d.onload=function(){Y.append(Y.getBlobName(),new K(null,{type:c.type,data:d.result})),bd.send.call(b,g,Y)},d.readAsBinaryString(c)}function fF(){return!window.XMLHttpRequest||"IE"===bh.browser&&bh.verComp(bh.version,8,"<")?function(){for(var g=["Msxml2.XMLHTTP.6.0","Microsoft.XMLHTTP"],Y=0;Y<g.length;Y++)try{return new ActiveXObject(g[Y])}catch(g){}}():new window.XMLHttpRequest}function gF(g){var Y=g.responseXML,c=g.responseText;return"IE"===bh.browser&&c&&Y&&!Y.documentElement&&/[^\/]+\/[^\+]+\+xml/.test(g.getResponseHeader("Content-Type"))&&(Y=new window.ActiveXObject("Microsoft.XMLDOM"),Y.async=!1,Y.validateOnParse=!1,Y.loadXML(c)),Y&&("IE"===bh.browser&&0!==Y.parseError||!Y.documentElement||"parsererror"===Y.documentElement.tagName)?null:Y}function fU(g){var Y="----moxieboundary"+(new Date).getTime(),c="--",d="\r\n",b="",f=this.getRuntime();if(!f.can("send_binary_string"))throw new a.RuntimeError(a.RuntimeError.NOT_SUPPORTED_ERR);return fj.setRequestHeader("Content-Type","multipart/form-data; boundary="+Y),g.each(function(g,f){b+=g instanceof K?c+Y+d+'Content-Disposition: form-data; name="'+f+'"; filename="'+unescape(encodeURIComponent(g.name||"blob"))+'"'+d+"Content-Type: "+(g.type||"application/octet-stream")+d+d+g.getSource()+d:c+Y+d+'Content-Disposition: form-data; name="'+f+'"'+d+d+unescape(encodeURIComponent(g))+d}),b+=c+Y+c+d}var fj,h,bd=this;Y.extend(this,{send:function(c,b){var a=this,gF="Mozilla"===bh.browser&&bh.verComp(bh.version,4,">=")&&bh.verComp(bh.version,7,"<"),bd="Android Browser"===bh.browser,U=!1;if(h=c.url.replace(/^.+?\/([\w\-\.]+)$/,"$1").toLowerCase(),fj=fF(),fj.open(c.method,c.url,c.async,c.user,c.password),b instanceof K)b.isDetached()&&(U=!0),b=b.getSource();else if(b instanceof f){if(b.hasBlob())if(b.getBlob().isDetached())b=fU.call(a,b),U=!0;else if((gF||bd)&&"blob"===Y.typeOf(b.getBlob().getSource())&&window.FileReader)return void g.call(a,c,b);if(b instanceof f){var bR=new window.FormData;b.each(function(g,Y){g instanceof K?bR.append(Y,g.getSource()):bR.append(Y,g)}),b=bR}}fj.upload?(c.withCredentials&&(fj.withCredentials=!0),fj.addEventListener("load",function(g){a.trigger(g)}),fj.addEventListener("error",function(g){a.trigger(g)}),fj.addEventListener("progress",function(g){a.trigger(g)}),fj.upload.addEventListener("progress",function(g){a.trigger({type:"UploadProgress",loaded:g.loaded,total:g.total})})):fj.onreadystatechange=function(){switch(fj.readyState){case 1:break;case 2:break;case 3:var g,Y;try{d.hasSameOrigin(c.url)&&(g=fj.getResponseHeader("Content-Length")||0),fj.responseText&&(Y=fj.responseText.length)}catch(c){g=Y=0}a.trigger({type:"progress",lengthComputable:!!g,total:parseInt(g,10),loaded:Y});break;case 4:fj.onreadystatechange=function(){},0===fj.status?a.trigger("error"):a.trigger("load")}},Y.isEmptyObj(c.headers)||Y.each(c.headers,function(g,Y){fj.setRequestHeader(Y,g)}),""!==c.responseType&&"responseType"in fj&&(fj.responseType="json"!==c.responseType||bh.can("return_response_type","json")?c.responseType:"text"),U?fj.sendAsBinary?fj.sendAsBinary(b):function(){for(var g=new Uint8Array(b.length),Y=0;Y<b.length;Y++)g[Y]=255&b.charCodeAt(Y);fj.send(g.buffer)}():fj.send(b),a.trigger("loadstart")},getStatus:function(){try{if(fj)return fj.status}catch(g){}return 0},getResponse:function(g){var Y=this.getRuntime();try{switch(g){case"blob":var d=new b(Y.uid,fj.response),K=fj.getResponseHeader("Content-Disposition");if(K){var f=K.match(/filename=([\'\"'])([^\1]+)\1/);f&&(h=f[2])}return d.name=h,d.type||(d.type=c.getFileMime(h)),d;case"json":return bh.can("return_response_type","json")?fj.response:200===fj.status&&window.JSON?JSON.parse(fj.responseText):null;case"document":return gF(fj);default:return""!==fj.responseText?fj.responseText:null}}catch(g){return null}},getAllResponseHeaders:function(){try{return fj.getAllResponseHeaders()}catch(g){}return""},abort:function(){fj&&fj.abort()},destroy:function(){bd=h=null}})}return g.XMLHttpRequest=fF}),d("moxie/runtime/html5/utils/BinaryReader",["moxie/core/utils/Basic"],function(g){function Y(g){g instanceof ArrayBuffer?c.apply(this,arguments):d.apply(this,arguments)}function c(Y){var c=new DataView(Y);g.extend(this,{readByteAt:function(g){return c.getUint8(g)},writeByteAt:function(g,Y){c.setUint8(g,Y)},SEGMENT:function(g,d,b){switch(arguments.length){case 2:return Y.slice(g,g+d);case 1:return Y.slice(g);case 3:if(null===b&&(b=new ArrayBuffer),b instanceof ArrayBuffer){var K=new Uint8Array(this.length()-d+b.byteLength);g>0&&K.set(new Uint8Array(Y.slice(0,g)),0),K.set(new Uint8Array(b),g),K.set(new Uint8Array(Y.slice(g+d)),g+b.byteLength),this.clear(),Y=K.buffer,c=new DataView(Y);break}default:return Y}},length:function(){return Y?Y.byteLength:0},clear:function(){c=Y=null}})}function d(Y){function c(g,c,d){d=3===arguments.length?d:Y.length-c-1,Y=Y.substr(0,c)+g+Y.substr(d+c)}g.extend(this,{readByteAt:function(g){return Y.charCodeAt(g)},writeByteAt:function(g,Y){c(String.fromCharCode(Y),g,1)},SEGMENT:function(g,d,b){switch(arguments.length){case 1:return Y.substr(g);case 2:return Y.substr(g,d);case 3:c(null!==b?b:"",g,d);break;default:return Y}},length:function(){return Y?Y.length:0},clear:function(){Y=null}})}return g.extend(Y.prototype,{littleEndian:!1,read:function(g,Y){var c,d,b;if(g+Y>this.length())throw new Error("You are trying to read outside the source boundaries.");for(d=this.littleEndian?0:-8*(Y-1),b=0,c=0;Y>b;b++)c|=this.readByteAt(g+b)<<Math.abs(d+8*b);return c},write:function(g,Y,c){var d,b;if(g>this.length())throw new Error("You are trying to write outside the source boundaries.");for(d=this.littleEndian?0:-8*(c-1),b=0;c>b;b++)this.writeByteAt(g+b,255&Y>>Math.abs(d+8*b))},BYTE:function(g){return this.read(g,1)},SHORT:function(g){return this.read(g,2)},LONG:function(g){return this.read(g,4)},SLONG:function(g){var Y=this.read(g,4);return Y>2147483647?Y-4294967296:Y},CHAR:function(g){return String.fromCharCode(this.read(g,1))},STRING:function(g,Y){return this.asArray("CHAR",g,Y).join("")},asArray:function(g,Y,c){for(var d=[],b=0;c>b;b++)d[b]=this[g](Y+b);return d}}),Y}),d("moxie/runtime/html5/image/JPEGHeaders",["moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(g,Y){return function c(d){var b,K,f,a=[],bh=0;if(b=new g(d),65496!==b.SHORT(0))throw b.clear(),new Y.ImageError(Y.ImageError.WRONG_FORMAT);for(K=2;K<=b.length();)if(f=b.SHORT(K),f>=65488&&65495>=f)K+=2;else{if(65498===f||65497===f)break;bh=b.SHORT(K+2)+2,f>=65505&&65519>=f&&a.push({hex:f,name:"APP"+(15&f),start:K,length:bh,segment:b.SEGMENT(K,bh)}),K+=bh}return b.clear(),{headers:a,restore:function(Y){var c,d,b;for(b=new g(Y),K=65504==b.SHORT(2)?4+b.SHORT(4):2,d=0,c=a.length;c>d;d++)b.SEGMENT(K,0,a[d].segment),K+=a[d].length;return Y=b.SEGMENT(),b.clear(),Y},strip:function(Y){var d,b,K,f;for(K=new c(Y),b=K.headers,K.purge(),d=new g(Y),f=b.length;f--;)d.SEGMENT(b[f].start,b[f].length,"");return Y=d.SEGMENT(),d.clear(),Y},get:function(g){for(var Y=[],c=0,d=a.length;d>c;c++)a[c].name===g.toUpperCase()&&Y.push(a[c].segment);return Y},set:function(g,Y){var c,d,b,K=[];for("string"==typeof Y?K.push(Y):K=Y,c=d=0,b=a.length;b>c&&(a[c].name===g.toUpperCase()&&(a[c].segment=K[d],a[c].length=K[d].length,d++),!(d>=K.length));c++);},purge:function(){this.headers=a=[]}}}}),d("moxie/runtime/html5/image/ExifParser",["moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader","moxie/core/Exceptions"],function(g,c,d){function b(K){function f(c,b){var K,f,a,bh,fF,fj,h,bd,U=this,bR=[],gV={},bB={1:"BYTE",7:"UNDEFINED",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",9:"SLONG",10:"SRATIONAL"},bQ={BYTE:1,UNDEFINED:1,ASCII:1,SHORT:2,LONG:4,RATIONAL:8,SLONG:4,SRATIONAL:8};for(K=U.SHORT(c),f=0;K>f;f++)if(bR=[],h=c+2+12*f,a=b[U.SHORT(h)],a!==Y){if(bh=bB[U.SHORT(h+=2)],fF=U.LONG(h+=2),fj=bQ[bh],!fj)throw new d.ImageError(d.ImageError.INVALID_META_ERR);if(h+=4,fj*fF>4&&(h=U.LONG(h)+fU.tiffHeader),h+fj*fF>=this.length())throw new d.ImageError(d.ImageError.INVALID_META_ERR);"ASCII"!==bh?(bR=U.asArray(bh,h,fF),bd=1==fF?bR[0]:bR,gV[a]=gF.hasOwnProperty(a)&&"object"!=typeof bd?gF[a][bd]:bd):gV[a]=g.trim(U.STRING(h,fF).replace(/\0$/,""))}return gV}function a(g,Y,c){var d,b,K,f=0;if("string"==typeof Y){var a=fF[g.toLowerCase()];for(var bh in a)if(a[bh]===Y){Y=bh;break}}d=fU[g.toLowerCase()+"IFD"],b=this.SHORT(d);for(var gF=0;b>gF;gF++)if(K=d+12*gF+2,this.SHORT(K)==Y){f=K+8;break}if(!f)return!1;try{this.write(f,c,4)}catch(g){return!1}return!0}var bh,fF,gF,fU,fj,h;if(c.call(this,K),fF={tiff:{274:"Orientation",270:"ImageDescription",271:"Make",272:"Model",305:"Software",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer"},exif:{36864:"ExifVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",36867:"DateTimeOriginal",33434:"ExposureTime",33437:"FNumber",34855:"ISOSpeedRatings",37377:"ShutterSpeedValue",37378:"ApertureValue",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37386:"FocalLength",41986:"ExposureMode",41987:"WhiteBalance",41990:"SceneCaptureType",41988:"DigitalZoomRatio",41992:"Contrast",41993:"Saturation",41994:"Sharpness"},gps:{0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude"},thumb:{513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength"}},gF={ColorSpace:{1:"sRGB",0:"Uncalibrated"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{1:"Daylight",2:"Fliorescent",3:"Tungsten",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 -5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},ExposureMode:{0:"Auto exposure",1:"Manual exposure",2:"Auto bracket"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},GPSLatitudeRef:{N:"North latitude",S:"South latitude"},GPSLongitudeRef:{E:"East longitude",W:"West longitude"}},fU={tiffHeader:10},fj=fU.tiffHeader,bh={clear:this.clear},g.extend(this,{read:function(){try{return b.prototype.read.apply(this,arguments)}catch(g){throw new d.ImageError(d.ImageError.INVALID_META_ERR)}},write:function(){try{return b.prototype.write.apply(this,arguments)}catch(g){throw new d.ImageError(d.ImageError.INVALID_META_ERR)}},UNDEFINED:function(){return this.BYTE.apply(this,arguments)},RATIONAL:function(g){return this.LONG(g)/this.LONG(g+4)},SRATIONAL:function(g){return this.SLONG(g)/this.SLONG(g+4)},ASCII:function(g){return this.CHAR(g)},TIFF:function(){return h||null},EXIF:function(){var Y=null;if(fU.exifIFD){try{Y=f.call(this,fU.exifIFD,fF.exif)}catch(g){return null}if(Y.ExifVersion&&"array"===g.typeOf(Y.ExifVersion)){for(var c=0,d="";c<Y.ExifVersion.length;c++)d+=String.fromCharCode(Y.ExifVersion[c]);Y.ExifVersion=d}}return Y},GPS:function(){var Y=null;if(fU.gpsIFD){try{Y=f.call(this,fU.gpsIFD,fF.gps)}catch(g){return null}Y.GPSVersionID&&"array"===g.typeOf(Y.GPSVersionID)&&(Y.GPSVersionID=Y.GPSVersionID.join("."))}return Y},thumb:function(){if(fU.IFD1)try{var g=f.call(this,fU.IFD1,fF.thumb);if("JPEGInterchangeFormat"in g)return this.SEGMENT(fU.tiffHeader+g.JPEGInterchangeFormat,g.JPEGInterchangeFormatLength)}catch(g){}return null},setExif:function(g,Y){return("PixelXDimension"===g||"PixelYDimension"===g)&&a.call(this,"exif",g,Y)},clear:function(){bh.clear(),K=fF=gF=h=fU=bh=null}}),65505!==this.SHORT(0)||"EXIF\0"!==this.STRING(4,5).toUpperCase())throw new d.ImageError(d.ImageError.INVALID_META_ERR);if(this.littleEndian=18761==this.SHORT(fj),42!==this.SHORT(fj+=2))throw new d.ImageError(d.ImageError.INVALID_META_ERR);fU.IFD0=fU.tiffHeader+this.LONG(fj+=2),h=f.call(this,fU.IFD0,fF.tiff),"ExifIFDPointer"in h&&(fU.exifIFD=fU.tiffHeader+h.ExifIFDPointer,delete h.ExifIFDPointer),"GPSInfoIFDPointer"in h&&(fU.gpsIFD=fU.tiffHeader+h.GPSInfoIFDPointer,delete h.GPSInfoIFDPointer),g.isEmptyObj(h)&&(h=null);var bd=this.LONG(fU.IFD0+12*this.SHORT(fU.IFD0)+2);bd&&(fU.IFD1=fU.tiffHeader+bd)}return b.prototype=c.prototype,b}),d("moxie/runtime/html5/image/JPEG",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEGHeaders","moxie/runtime/html5/utils/BinaryReader","moxie/runtime/html5/image/ExifParser"],function(g,Y,c,d,b){function K(K){function f(g){var Y,c,d=0;for(g||(g=fF);d<=g.length();){if(Y=g.SHORT(d+=2),Y>=65472&&65475>=Y)return d+=5,{height:g.SHORT(d),width:g.SHORT(d+=2)};c=g.SHORT(d+=2),d+=c-2}return null}function a(){var g,Y,c=fU.thumb();return c&&(g=new d(c),Y=f(g),g.clear(),Y)?(Y.data=c,Y):null}function bh(){fU&&gF&&fF&&(fU.clear(),gF.purge(),fF.clear(),fj=gF=fU=fF=null)}var fF,gF,fU,fj;if(fF=new d(K),65496!==fF.SHORT(0))throw new Y.ImageError(Y.ImageError.WRONG_FORMAT);gF=new c(K);try{fU=new b(gF.get("app1")[0])}catch(g){}fj=f.call(this),g.extend(this,{type:"image/jpeg",size:fF.length(),width:fj&&fj.width||0,height:fj&&fj.height||0,setExif:function(Y,c){return!!fU&&("object"===g.typeOf(Y)?g.each(Y,function(g,Y){fU.setExif(Y,g)}):fU.setExif(Y,c),void gF.set("app1",fU.SEGMENT()))},writeHeaders:function(){return arguments.length?gF.restore(arguments[0]):gF.restore(K)},stripHeaders:function(g){return gF.strip(g)},purge:function(){bh.call(this)}}),fU&&(this.meta={tiff:fU.TIFF(),exif:fU.EXIF(),gps:fU.GPS(),thumb:a()})}return K}),d("moxie/runtime/html5/image/PNG",["moxie/core/Exceptions","moxie/core/utils/Basic","moxie/runtime/html5/utils/BinaryReader"],function(g,Y,c){function d(d){function b(){var g,Y;return g=f.call(this,8),"IHDR"==g.type?(Y=g.start,{width:a.LONG(Y),height:a.LONG(Y+=4)}):null}function K(){a&&(a.clear(),d=gF=bh=fF=a=null)}function f(g){var Y,c,d,b;return Y=a.LONG(g),c=a.STRING(g+=4,4),d=g+=4,b=a.LONG(g+Y),{length:Y,type:c,start:d,CRC:b}}var a,bh,fF,gF;a=new c(d),function(){var Y=0,c=0,d=[35152,20039,3338,6666];for(c=0;c<d.length;c++,Y+=2)if(d[c]!=a.SHORT(Y))throw new g.ImageError(g.ImageError.WRONG_FORMAT)}(),gF=b.call(this),Y.extend(this,{type:"image/png",size:a.length(),width:gF.width,height:gF.height,purge:function(){K.call(this)}}),K.call(this)}return d}),d("moxie/runtime/html5/image/ImageInfo",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/html5/image/JPEG","moxie/runtime/html5/image/PNG"],function(g,Y,c,d){return function(b){var K,f=[c,d];K=function(){for(var g=0;g<f.length;g++)try{return new f[g](b)}catch(g){}throw new Y.ImageError(Y.ImageError.WRONG_FORMAT)}(),g.extend(this,{type:"",size:0,width:0,height:0,setExif:function(){},writeHeaders:function(g){return g},stripHeaders:function(g){return g},purge:function(){b=null}}),g.extend(this,K),this.purge=function(){K.purge(),K=null}}}),d("moxie/runtime/html5/image/ResizerCanvas",[],function(){function g(c,d){var b=c.width,K=Math.floor(b*d),f=!1;(.5>d||d>2)&&(d=.5>d?.5:2,f=!0);var a=Y(c,d);return f?g(a,K/a.width):a}function Y(g,Y){var c=g.width,d=g.height,b=Math.floor(c*Y),K=Math.floor(d*Y),f=document.createElement("canvas");return f.width=b,f.height=K,f.getContext("2d").drawImage(g,0,0,c,d,0,0,b,K),g=null,f}return{scale:g}}),d("moxie/runtime/html5/image/Image",["moxie/runtime/html5/Runtime","moxie/core/utils/Basic","moxie/core/Exceptions","moxie/core/utils/Encode","moxie/file/Blob","moxie/file/File","moxie/runtime/html5/image/ImageInfo","moxie/runtime/html5/image/ResizerCanvas","moxie/core/utils/Mime","moxie/core/utils/Env"],function(g,Y,c,d,b,K,f,a,bh){function fF(){function g(){if(!bB&&!bR)throw new c.ImageError(c.DOMException.INVALID_STATE_ERR);return bB||bR}function fF(){var Y=g();return"canvas"==Y.nodeName.toLowerCase()?Y:(bB=document.createElement("canvas"),bB.width=Y.width,bB.height=Y.height,bB.getContext("2d").drawImage(Y,0,0),bB)}function gF(g){return d.atob(g.substring(g.indexOf("base64,")+7))}function fU(g,Y){return"data:"+(Y||"")+";base64,"+d.btoa(g)}function fj(g){var Y=this;bR=new Image,bR.onerror=function(){U.call(this),Y.trigger("error",c.ImageError.WRONG_FORMAT)},bR.onload=function(){Y.trigger("load")},bR.src="data:"==g.substr(0,5)?g:fU(g,cj.type)}function h(g,Y){var d,b=this;return window.FileReader?(d=new FileReader,d.onload=function(){Y(this.result)},d.onerror=function(){b.trigger("error",c.ImageError.WRONG_FORMAT)},void d.readAsDataURL(g)):Y(g.getAsDataURL())}function bd(g,c){var d=Math.PI/180,b=document.createElement("canvas"),K=b.getContext("2d"),f=g.width,a=g.height;switch(Y.inArray(c,[5,6,7,8])>-1?(b.width=a,b.height=f):(b.width=f,b.height=a),c){case 2:K.translate(f,0),K.scale(-1,1);break;case 3:K.translate(f,a),K.rotate(180*d);break;case 4:K.translate(0,a),K.scale(1,-1);break;case 5:K.rotate(90*d),K.scale(1,-1);break;case 6:K.rotate(90*d),K.translate(0,-a);break;case 7:K.rotate(90*d),K.translate(f,-a),K.scale(-1,1);break;case 8:K.rotate(-90*d),K.translate(-f,0)}return K.drawImage(g,0,0,f,a),b}function U(){gV&&(gV.purge(),gV=null),bQ=bR=bB=cj=null,gJ=!1}var bR,gV,bB,bQ,cj,cb=this,gJ=!1,fE=!0;Y.extend(this,{loadFromBlob:function(g){var Y=this,d=Y.getRuntime(),b=!(arguments.length>1)||arguments[1];if(!d.can("access_binary"))throw new c.RuntimeError(c.RuntimeError.NOT_SUPPORTED_ERR);return cj=g,g.isDetached()?(bQ=g.getSource(),void fj.call(this,bQ)):void h.call(this,g.getSource(),function(g){b&&(bQ=gF(g)),fj.call(Y,g)})},loadFromImage:function(g,Y){this.meta=g.meta,cj=new K(null,{name:g.name,size:g.size,type:g.type}),fj.call(this,Y?bQ=g.getAsBinaryString():g.getAsDataURL())},getInfo:function(){var Y,c=this.getRuntime();return!gV&&bQ&&c.can("access_image_binary")&&(gV=new f(bQ)),Y={width:g().width||0,height:g().height||0,type:cj.type||bh.getFileMime(cj.name),size:bQ&&bQ.length||cj.size||0,name:cj.name||"",meta:null},fE&&(Y.meta=gV&&gV.meta||this.meta||{},!Y.meta||!Y.meta.thumb||Y.meta.thumb.data instanceof b||(Y.meta.thumb.data=new b(null,{type:"image/jpeg",data:Y.meta.thumb.data}))),Y},resize:function(Y,c,d){var b=document.createElement("canvas");if(b.width=Y.width,b.height=Y.height,b.getContext("2d").drawImage(g(),Y.x,Y.y,Y.width,Y.height,0,0,b.width,b.height),bB=a.scale(b,c),fE=d.preserveHeaders,!fE){var K=this.meta&&this.meta.tiff&&this.meta.tiff.Orientation||1;bB=bd(bB,K)}this.width=bB.width,this.height=bB.height,gJ=!0,this.trigger("Resize")},getAsCanvas:function(){return bB||(bB=fF()),bB.id=this.uid+"_canvas",bB},getAsBlob:function(g,Y){return g!==this.type?(gJ=!0,new K(null,{name:cj.name||"",type:g,data:cb.getAsDataURL(g,Y)})):new K(null,{name:cj.name||"",type:g,data:cb.getAsBinaryString(g,Y)})},getAsDataURL:function(g){var Y=arguments[1]||90;if(!gJ)return bR.src;if(fF(),"image/jpeg"!==g)return bB.toDataURL("image/png");try{return bB.toDataURL("image/jpeg",Y/100)}catch(g){return bB.toDataURL("image/jpeg")}},getAsBinaryString:function(g,Y){if(!gJ)return bQ||(bQ=gF(cb.getAsDataURL(g,Y))),bQ;if("image/jpeg"!==g)bQ=gF(cb.getAsDataURL(g,Y));else{var c;Y||(Y=90),fF();try{c=bB.toDataURL("image/jpeg",Y/100)}catch(g){c=bB.toDataURL("image/jpeg")}bQ=gF(c),gV&&(bQ=gV.stripHeaders(bQ),fE&&(gV.meta&&gV.meta.exif&&gV.setExif({PixelXDimension:this.width,PixelYDimension:this.height}),bQ=gV.writeHeaders(bQ)),gV.purge(),gV=null)}return gJ=!1,bQ},destroy:function(){cb=null,U.call(this),this.getRuntime().getShim().removeInstance(this.uid)}})}return g.Image=fF}),d("moxie/runtime/flash/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(g,Y,c,d,K){function f(){var g;try{g=navigator.plugins["Shockwave Flash"],g=g.description}catch(Y){try{g=new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version")}catch(Y){g="0.0"}}return g=g.match(/\d+/g),parseFloat(g[0]+"."+g[1])}function a(g){var d=c.get(g);d&&"OBJECT"==d.nodeName&&("IE"===Y.browser?(d.style.display="none",function Y(){4==d.readyState?bh(g):setTimeout(Y,10)}()):d.parentNode.removeChild(d))}function bh(g){var Y=c.get(g);if(Y){for(var d in Y)"function"==typeof Y[d]&&(Y[d]=null);Y.parentNode.removeChild(Y)}}function fF(bh){var fF,fj=this;bh=g.extend({swf_url:Y.swf_url},bh),K.call(this,bh,gF,{access_binary:function(g){return g&&"browser"===fj.mode},access_image_binary:function(g){return g&&"browser"===fj.mode},display_media:K.capTest(b("moxie/image/Image")),do_cors:K.capTrue,drag_and_drop:!1,report_upload_progress:function(){return"client"===fj.mode},resize_image:K.capTrue,return_response_headers:!1,return_response_type:function(Y){return!("json"!==Y||!window.JSON)||(!g.arrayDiff(Y,["","text","document"])||"browser"===fj.mode)},return_status_code:function(Y){return"browser"===fj.mode||!g.arrayDiff(Y,[200,404])},select_file:K.capTrue,select_multiple:K.capTrue,send_binary_string:function(g){return g&&"browser"===fj.mode},send_browser_cookies:function(g){return g&&"browser"===fj.mode},send_custom_headers:function(g){return g&&"browser"===fj.mode},send_multipart:K.capTrue,slice_blob:function(g){return g&&"browser"===fj.mode},stream_upload:function(g){return g&&"browser"===fj.mode},summon_file_dialog:!1,upload_filesize:function(Y){return g.parseSizeStr(Y)<=2097152||"client"===fj.mode},use_http_method:function(Y){return!g.arrayDiff(Y,["GET","POST"])}},{access_binary:function(g){return g?"browser":"client"},access_image_binary:function(g){return g?"browser":"client"},report_upload_progress:function(g){return g?"browser":"client"},return_response_type:function(Y){return g.arrayDiff(Y,["","text","json","document"])?"browser":["client","browser"]},return_status_code:function(Y){return g.arrayDiff(Y,[200,404])?"browser":["client","browser"]},send_binary_string:function(g){return g?"browser":"client"},send_browser_cookies:function(g){return g?"browser":"client"},send_custom_headers:function(g){return g?"browser":"client"},slice_blob:function(g){return g?"browser":"client"},stream_upload:function(g){return g?"client":"browser"},upload_filesize:function(Y){return g.parseSizeStr(Y)>=2097152?"client":"browser"}},"client"),f()<11.3&&(this.mode=!1),g.extend(this,{getShim:function(){return c.get(this.uid)},shimExec:function(g,Y){var c=[].slice.call(arguments,2);return fj.getShim().exec(this.uid,g,Y,c)},init:function(){var c,b,K;K=this.getShimContainer(),g.extend(K.style,{position:"absolute",top:"-8px",left:"-8px",width:"9px",height:"9px",overflow:"hidden"}),c='<object id="'+this.uid+'" type="application/x-shockwave-flash" data="'+bh.swf_url+'" ',"IE"===Y.browser&&(c+='classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" '),c+='width="100%" height="100%" style="outline:0"><param name="movie" value="'+bh.swf_url+'" /><param name="flashvars" value="uid='+escape(this.uid)+"&target="+Y.global_event_dispatcher+'" /><param name="wmode" value="transparent" /><param name="allowscriptaccess" value="always" /></object>',"IE"===Y.browser?(b=document.createElement("div"),K.appendChild(b),b.outerHTML=c,b=K=null):K.innerHTML=c,fF=setTimeout(function(){fj&&!fj.initialized&&fj.trigger("Error",new d.RuntimeError(d.RuntimeError.NOT_INIT_ERR))},5e3)},destroy:function(g){return function(){a(fj.uid),g.call(fj),clearTimeout(fF),bh=fF=g=fj=null}}(this.destroy)},fU)}var gF="flash",fU={};return K.addConstructor(gF,fF),fU}),d("moxie/runtime/flash/file/Blob",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(g,Y){var c={slice:function(g,c,d,b){var K=this.getRuntime();return 0>c?c=Math.max(g.size+c,0):c>0&&(c=Math.min(c,g.size)),0>d?d=Math.max(g.size+d,0):d>0&&(d=Math.min(d,g.size)),g=K.shimExec.call(this,"Blob","slice",c,d,b||""),g&&(g=new Y(K.uid,g)),g}};return g.Blob=c}),d("moxie/runtime/flash/file/FileInput",["moxie/runtime/flash/Runtime","moxie/file/File","moxie/core/utils/Basic"],function(g,Y,c){var d={init:function(g){var d=this,b=this.getRuntime();this.bind("Change",function(){var g=b.shimExec.call(d,"FileInput","getFiles");d.files=[],c.each(g,function(g){d.files.push(new Y(b.uid,g))})},999),this.getRuntime().shimExec.call(this,"FileInput","init",{accept:g.accept,multiple:g.multiple}),this.trigger("ready")}};return g.FileInput=d}),d("moxie/runtime/flash/file/FileReader",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(g,Y){function c(g,c){switch(c){case"readAsText":return Y.atob(g,"utf8");case"readAsBinaryString":return Y.atob(g);case"readAsDataURL":return g}return null}var d={read:function(g,Y){var d=this;return d.result="","readAsDataURL"===g&&(d.result="data:"+(Y.type||"")+";base64,"),d.bind("Progress",function(Y,b){b&&(d.result+=c(b,g))},999),d.getRuntime().shimExec.call(this,"FileReader","readAsBase64",Y.uid)}};return g.FileReader=d}),d("moxie/runtime/flash/file/FileReaderSync",["moxie/runtime/flash/Runtime","moxie/core/utils/Encode"],function(g,Y){function c(g,c){switch(c){case"readAsText":return Y.atob(g,"utf8");case"readAsBinaryString":return Y.atob(g);case"readAsDataURL":return g}return null}var d={read:function(g,Y){var d,b=this.getRuntime();return(d=b.shimExec.call(this,"FileReaderSync","readAsBase64",Y.uid))?("readAsDataURL"===g&&(d="data:"+(Y.type||"")+";base64,"+d),c(d,g,Y.type)):null}};return g.FileReaderSync=d}),d("moxie/runtime/flash/runtime/Transporter",["moxie/runtime/flash/Runtime","moxie/file/Blob"],function(g,Y){var c={getAsBlob:function(g){var c=this.getRuntime(),d=c.shimExec.call(this,"Transporter","getAsBlob",g);return d?new Y(c.uid,d):null}};return g.Transporter=c}),d("moxie/runtime/flash/xhr/XMLHttpRequest",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/file/File","moxie/file/FileReaderSync","moxie/runtime/flash/file/FileReaderSync","moxie/xhr/FormData","moxie/runtime/Transporter","moxie/runtime/flash/runtime/Transporter"],function(g,Y,c,d,b,K,f,a){var bh={send:function(g,d){function b(){g.transport=gF.mode,gF.shimExec.call(fF,"XMLHttpRequest","send",g,d)}function K(g,Y){gF.shimExec.call(fF,"XMLHttpRequest","appendBlob",g,Y.uid),d=null,b()}function bh(g,Y){var c=new a;c.bind("TransportingComplete",function(){Y(this.result)}),c.transport(g.getSource(),g.type,{ruid:gF.uid})}var fF=this,gF=fF.getRuntime();if(Y.isEmptyObj(g.headers)||Y.each(g.headers,function(g,Y){gF.shimExec.call(fF,"XMLHttpRequest","setRequestHeader",Y,g.toString())}),d instanceof f){var fU;if(d.each(function(g,Y){g instanceof c?fU=Y:gF.shimExec.call(fF,"XMLHttpRequest","append",Y,g)}),d.hasBlob()){var fj=d.getBlob();fj.isDetached()?bh(fj,function(g){fj.destroy(),K(fU,g)}):K(fU,fj)}else d=null,b()}else d instanceof c?d.isDetached()?bh(d,function(g){d.destroy(),d=g.uid,b()}):(d=d.uid,b()):b()},getResponse:function(g){var c,K,f=this.getRuntime();if(K=f.shimExec.call(this,"XMLHttpRequest","getResponseAsBlob")){if(K=new d(f.uid,K),"blob"===g)return K;try{if(c=new b,~Y.inArray(g,["","text"]))return c.readAsText(K);if("json"===g&&window.JSON)return JSON.parse(c.readAsText(K))}finally{K.destroy()}}return null},abort:function(){var g=this.getRuntime();g.shimExec.call(this,"XMLHttpRequest","abort"),this.dispatchEvent("readystatechange"),this.dispatchEvent("abort")}};return g.XMLHttpRequest=bh}),d("moxie/runtime/flash/image/Image",["moxie/runtime/flash/Runtime","moxie/core/utils/Basic","moxie/runtime/Transporter","moxie/file/Blob","moxie/file/FileReaderSync"],function(g,Y,c,d,b){var K={loadFromBlob:function(g){function Y(g){b.shimExec.call(d,"Image","loadFromBlob",g.uid),d=b=null}var d=this,b=d.getRuntime();if(g.isDetached()){var K=new c;K.bind("TransportingComplete",function(){Y(K.result.getSource())}),K.transport(g.getSource(),g.type,{ruid:b.uid})}else Y(g.getSource())},loadFromImage:function(g){var Y=this.getRuntime();return Y.shimExec.call(this,"Image","loadFromImage",g.uid)},getInfo:function(){var g=this.getRuntime(),Y=g.shimExec.call(this,"Image","getInfo");return!Y.meta||!Y.meta.thumb||Y.meta.thumb.data instanceof d||(Y.meta.thumb.data=new d(g.uid,Y.meta.thumb.data)),Y},getAsBlob:function(g,Y){var c=this.getRuntime(),b=c.shimExec.call(this,"Image","getAsBlob",g,Y);return b?new d(c.uid,b):null},getAsDataURL:function(){var g,Y=this.getRuntime(),c=Y.Image.getAsBlob.apply(this,arguments);return c?(g=new b,g.readAsDataURL(c)):null}};return g.Image=K}),d("moxie/runtime/silverlight/Runtime",["moxie/core/utils/Basic","moxie/core/utils/Env","moxie/core/utils/Dom","moxie/core/Exceptions","moxie/runtime/Runtime"],function(g,Y,c,d,K){function f(g){var Y,c,d,b,K,f=!1,a=null,bh=0;try{try{a=new ActiveXObject("AgControl.AgControl"),a.IsVersionSupported(g)&&(f=!0),a=null}catch(a){var fF=navigator.plugins["Silverlight Plug-In"];if(fF){for(Y=fF.description,"1.0.30226.2"===Y&&(Y="2.0.30226.2"),c=Y.split(".");c.length>3;)c.pop();for(;c.length<4;)c.push(0);for(d=g.split(".");d.length>4;)d.pop();do{b=parseInt(d[bh],10),K=parseInt(c[bh],10),bh++}while(bh<d.length&&b===K);K>=b&&!isNaN(b)&&(f=!0)}}}catch(g){f=!1}return f}function a(a){var gF,fU=this;a=g.extend({xap_url:Y.xap_url},a),K.call(this,a,bh,{access_binary:K.capTrue,access_image_binary:K.capTrue,display_media:K.capTest(b("moxie/image/Image")),do_cors:K.capTrue,drag_and_drop:!1,report_upload_progress:K.capTrue,resize_image:K.capTrue,return_response_headers:function(g){return g&&"client"===fU.mode},return_response_type:function(g){return"json"!==g||!!window.JSON},return_status_code:function(Y){return"client"===fU.mode||!g.arrayDiff(Y,[200,404])},select_file:K.capTrue,select_multiple:K.capTrue,send_binary_string:K.capTrue,send_browser_cookies:function(g){return g&&"browser"===fU.mode},send_custom_headers:function(g){return g&&"client"===fU.mode},send_multipart:K.capTrue,slice_blob:K.capTrue,stream_upload:!0,summon_file_dialog:!1,upload_filesize:K.capTrue,use_http_method:function(Y){return"client"===fU.mode||!g.arrayDiff(Y,["GET","POST"])}},{return_response_headers:function(g){return g?"client":"browser"},return_status_code:function(Y){return g.arrayDiff(Y,[200,404])?"client":["client","browser"]},send_browser_cookies:function(g){return g?"browser":"client"},send_custom_headers:function(g){return g?"client":"browser"},use_http_method:function(Y){return g.arrayDiff(Y,["GET","POST"])?"client":["client","browser"]}}),f("2.0.31005.0")&&"Opera"!==Y.browser||(this.mode=!1),g.extend(this,{getShim:function(){return c.get(this.uid).content.Moxie},shimExec:function(g,Y){var c=[].slice.call(arguments,2);return fU.getShim().exec(this.uid,g,Y,c)},init:function(){var g;g=this.getShimContainer(),g.innerHTML='<object id="'+this.uid+'" data="data:application/x-silverlight," type="application/x-silverlight-2" width="100%" height="100%" style="outline:none;"><param name="source" value="'+a.xap_url+'"/><param name="background" value="Transparent"/><param name="windowless" value="true"/><param name="enablehtmlaccess" value="true"/><param name="initParams" value="uid='+this.uid+",target="+Y.global_event_dispatcher+'"/></object>',gF=setTimeout(function(){fU&&!fU.initialized&&fU.trigger("Error",new d.RuntimeError(d.RuntimeError.NOT_INIT_ERR))},"Windows"!==Y.OS?1e4:5e3)},destroy:function(g){return function(){g.call(fU),clearTimeout(gF),a=gF=g=fU=null}}(this.destroy)},fF)}var bh="silverlight",fF={};return K.addConstructor(bh,a),fF}),d("moxie/runtime/silverlight/file/Blob",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/Blob"],function(g,Y,c){return g.Blob=Y.extend({},c)}),d("moxie/runtime/silverlight/file/FileInput",["moxie/runtime/silverlight/Runtime","moxie/file/File","moxie/core/utils/Basic"],function(g,Y,c){function d(g){for(var Y="",c=0;c<g.length;c++)Y+=(""!==Y?"|":"")+g[c].title+" | *."+g[c].extensions.replace(/,/g,";*.");return Y}var b={init:function(g){var b=this,K=this.getRuntime();this.bind("Change",function(){var g=K.shimExec.call(b,"FileInput","getFiles");b.files=[],c.each(g,function(g){b.files.push(new Y(K.uid,g))})},999),K.shimExec.call(this,"FileInput","init",d(g.accept),g.multiple),this.trigger("ready")},setOption:function(g,Y){"accept"==g&&(Y=d(Y)),this.getRuntime().shimExec.call(this,"FileInput","setOption",g,Y)}};return g.FileInput=b}),d("moxie/runtime/silverlight/file/FileDrop",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Dom","moxie/core/utils/Events"],function(g,Y,c){var d={init:function(){var g,d=this,b=d.getRuntime();return g=b.getShimContainer(),c.addEvent(g,"dragover",function(g){g.preventDefault(),g.stopPropagation(),g.dataTransfer.dropEffect="copy"},d.uid),c.addEvent(g,"dragenter",function(g){g.preventDefault();var c=Y.get(b.uid).dragEnter(g);c&&g.stopPropagation()},d.uid),c.addEvent(g,"drop",function(g){g.preventDefault();var c=Y.get(b.uid).dragDrop(g);c&&g.stopPropagation()},d.uid),b.shimExec.call(this,"FileDrop","init")}};return g.FileDrop=d}),d("moxie/runtime/silverlight/file/FileReader",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReader"],function(g,Y,c){return g.FileReader=Y.extend({},c)}),d("moxie/runtime/silverlight/file/FileReaderSync",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/file/FileReaderSync"],function(g,Y,c){return g.FileReaderSync=Y.extend({},c)}),d("moxie/runtime/silverlight/runtime/Transporter",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/runtime/Transporter"],function(g,Y,c){return g.Transporter=Y.extend({},c)}),d("moxie/runtime/silverlight/xhr/XMLHttpRequest",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/runtime/flash/xhr/XMLHttpRequest","moxie/runtime/silverlight/file/FileReaderSync","moxie/runtime/silverlight/runtime/Transporter"],function(g,Y,c){return g.XMLHttpRequest=Y.extend({},c)}),d("moxie/runtime/silverlight/image/Image",["moxie/runtime/silverlight/Runtime","moxie/core/utils/Basic","moxie/file/Blob","moxie/runtime/flash/image/Image"],function(g,Y,c,d){return g.Image=Y.extend({},d,{getInfo:function(){var g=this.getRuntime(),d=["tiff","exif","gps","thumb"],b={meta:{}},K=g.shimExec.call(this,"Image","getInfo");return K.meta&&(Y.each(d,function(g){var Y,c,d,f,a=K.meta[g];if(a&&a.keys)for(b.meta[g]={},c=0,d=a.keys.length;d>c;c++)Y=a.keys[c],f=a[Y],f&&(/^(\d|[1-9]\d+)$/.test(f)?f=parseInt(f,10):/^\d*\.\d+$/.test(f)&&(f=parseFloat(f)),b.meta[g][Y]=f)}),!b.meta||!b.meta.thumb||b.meta.thumb.data instanceof c||(b.meta.thumb.data=new c(g.uid,b.meta.thumb.data))),b.width=parseInt(K.width,10),b.height=parseInt(K.height,10),b.size=parseInt(K.size,10),b.type=K.type,b.name=K.name,b},resize:function(g,Y,c){this.getRuntime().shimExec.call(this,"Image","resize",g.x,g.y,g.width,g.height,Y,c.preserveHeaders,c.resample)}})}),d("moxie/runtime/html4/Runtime",["moxie/core/utils/Basic","moxie/core/Exceptions","moxie/runtime/Runtime","moxie/core/utils/Env"],function(g,Y,c,d){function K(Y){var K=this,bh=c.capTest,fF=c.capTrue;c.call(this,Y,f,{access_binary:bh(window.FileReader||window.File&&File.getAsDataURL),access_image_binary:!1,display_media:bh((d.can("create_canvas")||d.can("use_data_uri_over32kb"))&&b("moxie/image/Image")),do_cors:!1,drag_and_drop:!1,filter_by_extension:bh(function(){return!("Chrome"===d.browser&&d.verComp(d.version,28,"<")||"IE"===d.browser&&d.verComp(d.version,10,"<")||"Safari"===d.browser&&d.verComp(d.version,7,"<")||"Firefox"===d.browser&&d.verComp(d.version,37,"<"))}()),resize_image:function(){return a.Image&&K.can("access_binary")&&d.can("create_canvas")},report_upload_progress:!1,return_response_headers:!1,return_response_type:function(Y){return!("json"!==Y||!window.JSON)||!!~g.inArray(Y,["text","document",""])},return_status_code:function(Y){return!g.arrayDiff(Y,[200,404])},select_file:function(){return d.can("use_fileinput")},select_multiple:!1,send_binary_string:!1,send_custom_headers:!1,send_multipart:!0,slice_blob:!1,stream_upload:function(){return K.can("select_file")},summon_file_dialog:function(){return K.can("select_file")&&("Firefox"===d.browser&&d.verComp(d.version,4,">=")||"Opera"===d.browser&&d.verComp(d.version,12,">=")||"IE"===d.browser&&d.verComp(d.version,10,">=")||!!~g.inArray(d.browser,["Chrome","Safari"]))},upload_filesize:fF,use_http_method:function(Y){return!g.arrayDiff(Y,["GET","POST"])}}),g.extend(this,{init:function(){this.trigger("Init")},destroy:function(g){return function(){g.call(K),g=K=null}}(this.destroy)}),g.extend(this.getShim(),a)}var f="html4",a={};return c.addConstructor(f,K),a}),d("moxie/runtime/html4/file/FileInput",["moxie/runtime/html4/Runtime","moxie/file/File","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Events","moxie/core/utils/Mime","moxie/core/utils/Env"],function(g,Y,c,d,b,K,f){function a(){function g(){var K,fF,fU,fj,h,bd,U=this,bR=U.getRuntime();bd=c.guid("uid_"),K=bR.getShimContainer(),a&&(fU=d.get(a+"_form"),fU&&c.extend(fU.style,{top:"100%"})),fj=document.createElement("form"),fj.setAttribute("id",bd+"_form"),fj.setAttribute("method","post"),fj.setAttribute("enctype","multipart/form-data"),fj.setAttribute("encoding","multipart/form-data"),c.extend(fj.style,{overflow:"hidden",position:"absolute",top:0,left:0,width:"100%",height:"100%"}),h=document.createElement("input"),h.setAttribute("id",bd),h.setAttribute("type","file"),h.setAttribute("accept",gF.join(",")),c.extend(h.style,{fontSize:"999px",opacity:0}),fj.appendChild(h),K.appendChild(fj),c.extend(h.style,{position:"absolute",top:0,left:0,width:"100%",height:"100%"}),"IE"===f.browser&&f.verComp(f.version,10,"<")&&c.extend(h.style,{filter:"progid:DXImageTransform.Microsoft.Alpha(opacity=0)"}),h.onchange=function(){var c;if(this.value){if(this.files){if(c=this.files[0],0===c.size)return void fj.parentNode.removeChild(fj)}else c={name:this.value};c=new Y(bR.uid,c),this.onchange=function(){},g.call(U),U.files=[c],h.setAttribute("id",c.uid),fj.setAttribute("id",c.uid+"_form"),U.trigger("change"),h=fj=null}},bR.can("summon_file_dialog")&&(fF=d.get(bh.browse_button),b.removeEvent(fF,"click",U.uid),b.addEvent(fF,"click",function(g){h&&!h.disabled&&h.click(),g.preventDefault()},U.uid)),a=bd,K=fU=fF=null}var a,bh,fF,gF=[];c.extend(this,{init:function(Y){var c,f=this,a=f.getRuntime();bh=Y,gF=Y.accept.mimes||K.extList2mimes(Y.accept,a.can("filter_by_extension")),c=a.getShimContainer(),function(){var g,K,gF;g=d.get(Y.browse_button),fF=d.getStyle(g,"z-index")||"auto",a.can("summon_file_dialog")&&("static"===d.getStyle(g,"position")&&(g.style.position="relative"),f.bind("Refresh",function(){K=parseInt(fF,10)||1,d.get(bh.browse_button).style.zIndex=K,this.getRuntime().getShimContainer().style.zIndex=K-1})),gF=a.can("summon_file_dialog")?g:c,b.addEvent(gF,"mouseover",function(){f.trigger("mouseenter")},f.uid),b.addEvent(gF,"mouseout",function(){f.trigger("mouseleave")},f.uid),b.addEvent(gF,"mousedown",function(){f.trigger("mousedown")},f.uid),b.addEvent(d.get(Y.container),"mouseup",function(){f.trigger("mouseup")},f.uid),g=null}(),g.call(this),c=null,f.trigger({type:"ready",async:!0})},setOption:function(g,Y){var c,b=this.getRuntime();"accept"==g&&(gF=Y.mimes||K.extList2mimes(Y,b.can("filter_by_extension"))),c=d.get(a),c&&c.setAttribute("accept",gF.join(","))},disable:function(g){var Y;(Y=d.get(a))&&(Y.disabled=!!g)},destroy:function(){var g=this.getRuntime(),Y=g.getShim(),c=g.getShimContainer(),K=bh&&d.get(bh.container),f=bh&&d.get(bh.browse_button);K&&b.removeAllEvents(K,this.uid),f&&(b.removeAllEvents(f,this.uid),f.style.zIndex=fF),c&&(b.removeAllEvents(c,this.uid),c.innerHTML=""),Y.removeInstance(this.uid),a=gF=bh=c=K=f=Y=null}})}return g.FileInput=a}),d("moxie/runtime/html4/file/FileReader",["moxie/runtime/html4/Runtime","moxie/runtime/html5/file/FileReader"],function(g,Y){return g.FileReader=Y}),d("moxie/runtime/html4/xhr/XMLHttpRequest",["moxie/runtime/html4/Runtime","moxie/core/utils/Basic","moxie/core/utils/Dom","moxie/core/utils/Url","moxie/core/Exceptions","moxie/core/utils/Events","moxie/file/Blob","moxie/xhr/FormData"],function(g,Y,c,d,b,K,f,a){function bh(){function g(g){var Y,d,b,f,a=this,bh=!1;if(gF){if(Y=gF.id.replace(/_iframe$/,""),d=c.get(Y+"_form")){for(b=d.getElementsByTagName("input"),f=b.length;f--;)switch(b[f].getAttribute("type")){case"hidden":b[f].parentNode.removeChild(b[f]);break;case"file":bh=!0}b=[],bh||d.parentNode.removeChild(d),d=null}setTimeout(function(){K.removeEvent(gF,"load",a.uid),gF.parentNode&&gF.parentNode.removeChild(gF);var Y=a.getRuntime().getShimContainer();Y.children.length||Y.parentNode.removeChild(Y),Y=gF=null,g()},1)}}var bh,fF,gF;Y.extend(this,{send:function(fU,fj){function h(){var c=bQ.getShimContainer()||document.body,b=document.createElement("div");b.innerHTML='<iframe id="'+bd+'_iframe" name="'+bd+'_iframe" src="javascript:&quot;&quot;" style="display:none"></iframe>',gF=b.firstChild,c.appendChild(gF),K.addEvent(gF,"load",function(){var c;try{c=gF.contentWindow.document||gF.contentDocument||window.frames[gF.id].document,/^4(0[0-9]|1[0-7]|2[2346])\s/.test(c.title)?bh=c.title.replace(/^(\d+).*$/,"$1"):(bh=200,fF=Y.trim(c.body.innerHTML),bB.trigger({type:"progress",loaded:fF.length,total:fF.length}),gV&&bB.trigger({type:"uploadprogress",loaded:gV.size||1025,total:gV.size||1025}))}catch(Y){if(!d.hasSameOrigin(fU.url))return void g.call(bB,function(){bB.trigger("error")});bh=404}g.call(bB,function(){bB.trigger("load")})},bB.uid)}var bd,U,bR,gV,bB=this,bQ=bB.getRuntime();if(bh=fF=null,fj instanceof a&&fj.hasBlob()){if(gV=fj.getBlob(),bd=gV.uid,bR=c.get(bd),U=c.get(bd+"_form"),!U)throw new b.DOMException(b.DOMException.NOT_FOUND_ERR)}else bd=Y.guid("uid_"),U=document.createElement("form"),U.setAttribute("id",bd+"_form"),U.setAttribute("method",fU.method),U.setAttribute("enctype","multipart/form-data"),U.setAttribute("encoding","multipart/form-data"),bQ.getShimContainer().appendChild(U);U.setAttribute("target",bd+"_iframe"),fj instanceof a&&fj.each(function(g,c){if(g instanceof f)bR&&bR.setAttribute("name",c);else{var d=document.createElement("input");Y.extend(d,{type:"hidden",name:c,value:g}),bR?U.insertBefore(d,bR):U.appendChild(d)}}),U.setAttribute("action",fU.url),h(),U.submit(),bB.trigger("loadstart")},getStatus:function(){return bh},getResponse:function(g){if("json"===g&&"string"===Y.typeOf(fF)&&window.JSON)try{return JSON.parse(fF.replace(/^\s*<pre[^>]*>/,"").replace(/<\/pre>\s*$/,""))}catch(g){return null}return fF},abort:function(){var Y=this;gF&&gF.contentWindow&&(gF.contentWindow.stop?gF.contentWindow.stop():gF.contentWindow.document.execCommand?gF.contentWindow.document.execCommand("Stop"):gF.src="about:blank"),g.call(this,function(){Y.dispatchEvent("abort")})}})}return g.XMLHttpRequest=bh}),d("moxie/runtime/html4/image/Image",["moxie/runtime/html4/Runtime","moxie/runtime/html5/image/Image"],function(g,Y){return g.Image=Y}),f(["moxie/core/utils/Basic","moxie/core/utils/Encode","moxie/core/utils/Env","moxie/core/Exceptions","moxie/core/utils/Dom","moxie/core/EventTarget","moxie/runtime/Runtime","moxie/runtime/RuntimeClient","moxie/file/Blob","moxie/core/I18n","moxie/core/utils/Mime","moxie/file/FileInput","moxie/file/File","moxie/file/FileDrop","moxie/file/FileReader","moxie/core/utils/Url","moxie/runtime/RuntimeTarget","moxie/xhr/FormData","moxie/xhr/XMLHttpRequest","moxie/runtime/Transporter","moxie/image/Image","moxie/core/utils/Events","moxie/runtime/html5/image/ResizerCanvas"])}(this)}),!function(g,Y){var c=function(){var g={};return Y.apply(g,arguments),g.plupload};"function"==typeof define&&define.amd?define("plupload",["./moxie"],c):"object"==typeof module&&module.exports?module.exports=c(require("./moxie")):g.plupload=c(g.moxie)}(this||window,function(g){!function(g,Y,c){function d(g){function Y(g,Y,c){var b={chunks:"slice_blob",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",urlstream_upload:"send_binary_string",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};b[g]?d[b[g]]=Y:c||(d[g]=Y)}var c=g.required_features,d={};return"string"==typeof c?bh.each(c.split(/\s*,\s*/),function(g){Y(g,!0)}):"object"==typeof c?bh.each(c,function(g,c){Y(c,g)}):c===!0&&(g.chunk_size>0&&(d.slice_blob=!0),bh.isEmptyObj(g.resize)&&g.multipart||(d.send_binary_string=!0),bh.each(g,function(g,c){Y(c,!!g,!0)})),d}var b=window.setTimeout,K={},f=Y.core.utils,a=Y.runtime.Runtime,bh={VERSION:"2.2.1",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,mimeTypes:f.Mime.mimes,ua:f.Env,typeOf:f.Basic.typeOf,extend:f.Basic.extend,guid:f.Basic.guid,getAll:function(g){var Y,c=[];"array"!==bh.typeOf(g)&&(g=[g]);for(var d=g.length;d--;)Y=bh.get(g[d]),Y&&c.push(Y);return c.length?c:null},get:f.Dom.get,each:f.Basic.each,getPos:f.Dom.getPos,getSize:f.Dom.getSize,xmlEncode:function(g){var Y={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"},c=/[<>&\"\']/g;return g?(""+g).replace(c,function(g){return Y[g]?"&"+Y[g]+";":g}):g},toArray:f.Basic.toArray,inArray:f.Basic.inArray,inSeries:f.Basic.inSeries,addI18n:Y.core.I18n.addI18n,translate:Y.core.I18n.translate,sprintf:f.Basic.sprintf,isEmptyObj:f.Basic.isEmptyObj,hasClass:f.Dom.hasClass,addClass:f.Dom.addClass,removeClass:f.Dom.removeClass,getStyle:f.Dom.getStyle,addEvent:f.Events.addEvent,removeEvent:f.Events.removeEvent,removeAllEvents:f.Events.removeAllEvents,cleanName:function(g){var Y,c;for(c=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],Y=0;Y<c.length;Y+=2)g=g.replace(c[Y],c[Y+1]);return g=g.replace(/\s+/g,"_"),g=g.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(g,Y){var c="";return bh.each(Y,function(g,Y){c+=(c?"&":"")+encodeURIComponent(Y)+"="+encodeURIComponent(g)}),c&&(g+=(g.indexOf("?")>0?"&":"?")+c),g},formatSize:function(g){function Y(g,Y){return Math.round(g*Math.pow(10,Y))/Math.pow(10,Y)}if(g===c||/\D/.test(g))return bh.translate("N/A");var d=Math.pow(1024,4);return g>d?Y(g/d,1)+" "+bh.translate("tb"):g>(d/=1024)?Y(g/d,1)+" "+bh.translate("gb"):g>(d/=1024)?Y(g/d,1)+" "+bh.translate("mb"):g>1024?Math.round(g/1024)+" "+bh.translate("kb"):g+" "+bh.translate("b")},parseSize:f.Basic.parseSizeStr,predictRuntime:function(g,Y){var c,d;return c=new bh.Uploader(g),d=a.thatCan(c.getOption().required_features,Y||g.runtimes),c.destroy(),d},addFileFilter:function(g,Y){K[g]=Y}};bh.addFileFilter("mime_types",function(g,Y,c){g.length&&!g.regexp.test(Y.name)?(this.trigger("Error",{code:bh.FILE_EXTENSION_ERROR,message:bh.translate("File extension error."),file:Y}),c(!1)):c(!0)}),bh.addFileFilter("max_file_size",function(g,Y,c){var d;g=bh.parseSize(g),Y.size!==d&&g&&Y.size>g?(this.trigger("Error",{code:bh.FILE_SIZE_ERROR,message:bh.translate("File size error."),file:Y}),c(!1)):c(!0)}),bh.addFileFilter("prevent_duplicates",function(g,Y,c){if(g)for(var d=this.files.length;d--;)if(Y.name===this.files[d].name&&Y.size===this.files[d].size)return this.trigger("Error",{code:bh.FILE_DUPLICATE_ERROR,message:bh.translate("Duplicate file error."),file:Y}),void c(!1);c(!0)}),bh.Uploader=function(g){function f(){var g,Y,c=0;if(this.state==bh.STARTED){for(Y=0;Y<e.length;Y++)g||e[Y].status!=bh.QUEUED?c++:(g=e[Y],this.trigger("BeforeUpload",g)&&(g.status=bh.UPLOADING,this.trigger("UploadFile",g)));c==e.length&&(this.state!==bh.STOPPED&&(this.state=bh.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",e))}}function fF(g){g.percent=g.size>0?Math.ceil(100*(g.loaded/g.size)):100,gF()}function gF(){var g,Y;for(gb.reset(),g=0;g<e.length;g++)Y=e[g],Y.size!==c?(gb.size+=Y.origSize,gb.loaded+=Y.loaded*Y.origSize/Y.size):gb.size=c,Y.status==bh.DONE?gb.uploaded++:Y.status==bh.FAILED?gb.failed++:gb.queued++;gb.size===c?gb.percent=e.length>0?Math.ceil(100*(gb.uploaded/e.length)):0:(gb.bytesPerSec=Math.ceil(gb.loaded/((+new Date-cG||1)/1e3)),gb.percent=gb.size>0?Math.ceil(100*(gb.loaded/gb.size)):0)}function fU(){var g=Kh[0]||ba[0];return!!g&&g.getRuntime().uid}function fj(g,Y){if(g.ruid){var c=a.getInfo(g.ruid);if(c)return c.can(Y)}return!1}function h(){this.bind("FilesAdded FilesRemoved",function(g){g.trigger("QueueChanged"),g.refresh()}),this.bind("CancelUpload",cb),this.bind("BeforeUpload",gV),this.bind("UploadFile",bB),this.bind("UploadProgress",bQ),this.bind("StateChanged",cj),this.bind("QueueChanged",gF),this.bind("Error",fE),this.bind("FileUploaded",gJ),this.bind("Destroy",ag)}function bd(g,c){var d=this,b=0,K=[],f={runtime_order:g.runtimes,required_caps:g.required_features,preferred_caps:af,swf_url:g.flash_swf_url,xap_url:g.silverlight_xap_url};bh.each(g.runtimes.split(/\s*,\s*/),function(Y){g[Y]&&(f[Y]=g[Y])}),g.browse_button&&bh.each(g.browse_button,function(c){K.push(function(K){var fF=new Y.file.FileInput(bh.extend({},f,{accept:g.filters.mime_types,name:g.file_data_name,multiple:g.multi_selection,container:g.container,browse_button:c}));fF.onready=function(){var g=a.getInfo(this.ruid);bh.extend(d.features,{chunks:g.can("slice_blob"),multipart:g.can("send_multipart"),multi_selection:g.can("select_multiple")}),b++,Kh.push(this),K()},fF.onchange=function(){d.addFile(this.files)},fF.bind("mouseenter mouseleave mousedown mouseup",function(Y){c_||(g.browse_button_hover&&("mouseenter"===Y.type?bh.addClass(c,g.browse_button_hover):"mouseleave"===Y.type&&bh.removeClass(c,g.browse_button_hover)),g.browse_button_active&&("mousedown"===Y.type?bh.addClass(c,g.browse_button_active):"mouseup"===Y.type&&bh.removeClass(c,g.browse_button_active)))}),fF.bind("mousedown",function(){d.trigger("Browse")}),fF.bind("error runtimeerror",function(){fF=null,K()}),fF.init()})}),g.drop_element&&bh.each(g.drop_element,function(g){K.push(function(c){var K=new Y.file.FileDrop(bh.extend({},f,{drop_zone:g}));K.onready=function(){var g=a.getInfo(this.ruid);bh.extend(d.features,{chunks:g.can("slice_blob"),multipart:g.can("send_multipart"),dragdrop:g.can("drag_and_drop")}),b++,ba.push(this),c()},K.ondrop=function(){d.addFile(this.files)},K.bind("error runtimeerror",function(){K=null,c()}),K.init()})}),bh.inSeries(K,function(){"function"==typeof c&&c(b)})}function U(g,d,b){var K=new Y.image.Image;try{K.onload=function(){return d.width>this.width&&d.height>this.height&&d.quality===c&&d.preserve_headers&&!d.crop?(this.destroy(),b(g)):void K.downsize(d.width,d.height,d.crop,d.preserve_headers)},K.onresize=function(){b(this.getAsBlob(g.type,d.quality)),this.destroy()},K.onerror=function(){b(g)},K.load(g)}catch(Y){b(g)}}function bR(g,c,b){function K(g,c,d){var b=gi[g];switch(g){case"max_file_size":"max_file_size"===g&&(gi.max_file_size=gi.filters.max_file_size=c);break;case"chunk_size":(c=bh.parseSize(c))&&(gi[g]=c,gi.send_file_name=!0);break;case"multipart":gi[g]=c,c||(gi.send_file_name=!0);break;case"unique_names":gi[g]=c,c&&(gi.send_file_name=!0);break;case"filters":"array"===bh.typeOf(c)&&(c={mime_types:c}),d?bh.extend(gi.filters,c):gi.filters=c,c.mime_types&&("string"===bh.typeOf(c.mime_types)&&(c.mime_types=Y.core.utils.Mime.mimes2extList(c.mime_types)),c.mime_types.regexp=function(g){var Y=[];return bh.each(g,function(g){bh.each(g.extensions.split(/,/),function(g){/^\s*\*\s*$/.test(g)?Y.push("\\.*"):Y.push("\\."+g.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+Y.join("|")+")$","i")}(c.mime_types),gi.filters.mime_types=c.mime_types);break;case"resize":gi.resize=!!c&&bh.extend({preserve_headers:!0,crop:!1},c);break;case"prevent_duplicates":gi.prevent_duplicates=gi.filters.prevent_duplicates=!!c;break;case"container":case"browse_button":case"drop_element":c="container"===g?bh.get(c):bh.getAll(c);case"runtimes":case"multi_selection":case"flash_swf_url":case"silverlight_xap_url":gi[g]=c,d||(fF=!0);break;default:gi[g]=c}d||f.trigger("OptionChanged",g,c,b)}var f=this,fF=!1;"object"==typeof g?bh.each(g,function(g,Y){K(Y,g,b)}):K(g,c,b),b?(gi.required_features=d(bh.extend({},gi)),af=d(bh.extend({},gi,{required_features:!0}))):fF&&(f.trigger("Destroy"),bd.call(f,gi,function(g){g?(f.runtime=a.getInfo(fU()).type,f.trigger("Init",{runtime:f.runtime}),f.trigger("PostInit")):f.trigger("Error",{code:bh.INIT_ERROR,message:bh.translate("Init error.")})}))}function gV(g,Y){if(g.settings.unique_names){var c=Y.name.match(/\.([^.]+)$/),d="part";c&&(d=c[1]),Y.target_name=Y.id+"."+d}}function bB(g,c){function d(){gF-- >0?b(K,1e3):(c.loaded=h,g.trigger("Error",{code:bh.HTTP_ERROR,message:bh.translate("HTTP Error."),file:c,response:bhb.responseText,status:bhb.status,responseHeaders:bhb.getAllResponseHeaders()}))}function K(){var fj,bd,U,bR={};c.status===bh.UPLOADING&&g.state!==bh.STOPPED&&(g.settings.send_file_name&&(bR.name=c.target_name||c.name),fF&&fU.chunks&&f.size>fF?(U=Math.min(fF,f.size-h),fj=f.slice(h,h+U)):(U=f.size,fj=f),fF&&fU.chunks&&(g.settings.send_chunk_number?(bR.chunk=Math.ceil(h/fF),bR.chunks=Math.ceil(f.size/fF)):(bR.offset=h,bR.total=f.size)),bhb=new Y.xhr.XMLHttpRequest,bhb.upload&&(bhb.upload.onprogress=function(Y){c.loaded=Math.min(c.size,h+Y.loaded),g.trigger("UploadProgress",c)}),bhb.onload=function(){return bhb.status>=400?void d():(gF=g.settings.max_retries,U<f.size?(fj.destroy(),h+=U,c.loaded=Math.min(h,f.size),g.trigger("ChunkUploaded",c,{offset:c.loaded,total:f.size,response:bhb.responseText,status:bhb.status,responseHeaders:bhb.getAllResponseHeaders()}),"Android Browser"===bh.ua.browser&&g.trigger("UploadProgress",c)):c.loaded=c.size,fj=bd=null,void(!h||h>=f.size?(c.size!=c.origSize&&(f.destroy(),f=null),g.trigger("UploadProgress",c),c.status=bh.DONE,g.trigger("FileUploaded",c,{response:bhb.responseText,status:bhb.status,responseHeaders:bhb.getAllResponseHeaders()})):b(K,1)))},bhb.onerror=function(){d()},bhb.onloadend=function(){this.destroy(),bhb=null},g.settings.multipart&&fU.multipart?(bhb.open("post",a,!0),bh.each(g.settings.headers,function(g,Y){bhb.setRequestHeader(Y,g)}),bd=new Y.xhr.FormData,bh.each(bh.extend(bR,g.settings.multipart_params),function(g,Y){bd.append(Y,g)}),bd.append(g.settings.file_data_name,fj),bhb.send(bd,{runtime_order:g.settings.runtimes,required_caps:g.settings.required_features,preferred_caps:af,swf_url:g.settings.flash_swf_url,xap_url:g.settings.silverlight_xap_url})):(a=bh.buildUrl(g.settings.url,bh.extend(bR,g.settings.multipart_params)),bhb.open("post",a,!0),bh.each(g.settings.headers,function(g,Y){bhb.setRequestHeader(Y,g)}),bhb.hasRequestHeader("Content-Type")||bhb.setRequestHeader("Content-Type","application/octet-stream"),bhb.send(fj,{runtime_order:g.settings.runtimes,required_caps:g.settings.required_features,preferred_caps:af,swf_url:g.settings.flash_swf_url,xap_url:g.settings.silverlight_xap_url})))}var f,a=g.settings.url,fF=g.settings.chunk_size,gF=g.settings.max_retries,fU=g.features,h=0;c.loaded&&(h=c.loaded=fF?fF*Math.floor(c.loaded/fF):0),f=c.getSource(),!bh.isEmptyObj(g.settings.resize)&&fj(f,"send_binary_string")&&-1!==bh.inArray(f.type,["image/jpeg","image/png"])?U.call(this,f,g.settings.resize,function(g){f=g,c.size=g.size,K()}):K()}function bQ(g,Y){fF(Y)}function cj(g){if(g.state==bh.STARTED)cG=+new Date;else if(g.state==bh.STOPPED)for(var Y=g.files.length-1;Y>=0;Y--)g.files[Y].status==bh.UPLOADING&&(g.files[Y].status=bh.QUEUED,gF())}function cb(){bhb&&bhb.abort()}function gJ(g){gF(),b(function(){f.call(g)},1)}function fE(g,Y){Y.code===bh.INIT_ERROR?g.destroy():Y.code===bh.HTTP_ERROR&&(Y.file.status=bh.FAILED,fF(Y.file),g.state==bh.STARTED&&(g.trigger("CancelUpload"),b(function(){f.call(g)},1)))}function ag(g){g.stop(),bh.each(e,function(g){g.destroy()}),e=[],Kh.length&&(bh.each(Kh,function(g){g.destroy()}),Kh=[]),ba.length&&(bh.each(ba,function(g){g.destroy()}),ba=[]),af={},c_=!1,cG=bhb=null,gb.reset()}var gi,cG,gb,bhb,T=bh.guid(),e=[],af={},Kh=[],ba=[],c_=!1;gi={runtimes:a.order,max_retries:0,chunk_size:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",filters:{mime_types:[],prevent_duplicates:!1,max_file_size:0},resize:!1,send_file_name:!0,send_chunk_number:!0},bR.call(this,g,null,!0),gb=new bh.QueueProgress,bh.extend(this,{id:T,uid:T,state:bh.STOPPED,features:{},runtime:null,files:e,settings:gi,total:gb,init:function(){var g,Y,c=this;return g=c.getOption("preinit"),"function"==typeof g?g(c):bh.each(g,function(g,Y){c.bind(Y,g)}),h.call(c),bh.each(["container","browse_button","drop_element"],function(g){return null===c.getOption(g)?(Y={code:bh.INIT_ERROR,message:bh.sprintf(bh.translate("%s specified, but cannot be found."),g)},!1):void 0}),Y?c.trigger("Error",Y):gi.browse_button||gi.drop_element?void bd.call(c,gi,function(g){var Y=c.getOption("init");"function"==typeof Y?Y(c):bh.each(Y,function(g,Y){c.bind(Y,g)}),g?(c.runtime=a.getInfo(fU()).type,c.trigger("Init",{runtime:c.runtime}),c.trigger("PostInit")):c.trigger("Error",{code:bh.INIT_ERROR,message:bh.translate("Init error.")})}):c.trigger("Error",{code:bh.INIT_ERROR,message:bh.translate("You must specify either browse_button or drop_element.")})},setOption:function(g,Y){bR.call(this,g,Y,!this.runtime)},getOption:function(g){return g?gi[g]:gi},refresh:function(){Kh.length&&bh.each(Kh,function(g){g.trigger("Refresh")}),this.trigger("Refresh")},start:function(){this.state!=bh.STARTED&&(this.state=bh.STARTED,this.trigger("StateChanged"),f.call(this))},stop:function(){this.state!=bh.STOPPED&&(this.state=bh.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){c_=arguments[0]===c||arguments[0],Kh.length&&bh.each(Kh,function(g){g.disable(c_)}),this.trigger("DisableBrowse",c_)},getFile:function(g){var Y;for(Y=e.length-1;Y>=0;Y--)if(e[Y].id===g)return e[Y]},addFile:function(g,c){function d(g,Y){var c=[];bh.each(fF.settings.filters,function(Y,d){K[d]&&c.push(function(c){K[d].call(fF,Y,g,function(g){c(!g)})})}),bh.inSeries(c,Y)}function f(g){var K=bh.typeOf(g);if(g instanceof Y.file.File){if(!g.ruid&&!g.isDetached()){if(!a)return!1;g.ruid=a,g.connectRuntime(a)}f(new bh.File(g))}else g instanceof Y.file.Blob?(f(g.getSource()),g.destroy()):g instanceof bh.File?(c&&(g.name=c),gF.push(function(Y){d(g,function(c){c||(e.push(g),fj.push(g),fF.trigger("FileFiltered",g)),b(Y,1)})})):-1!==bh.inArray(K,["file","blob"])?f(new Y.file.File(null,g)):"node"===K&&"filelist"===bh.typeOf(g.files)?bh.each(g.files,f):"array"===K&&(c=null,bh.each(g,f))}var a,fF=this,gF=[],fj=[];a=fU(),f(g),gF.length&&bh.inSeries(gF,function(){fj.length&&fF.trigger("FilesAdded",fj)})},removeFile:function(g){for(var Y="string"==typeof g?g:g.id,c=e.length-1;c>=0;c--)if(e[c].id===Y)return this.splice(c,1)[0]},splice:function(g,Y){var d=e.splice(g===c?0:g,Y===c?e.length:Y),b=!1;return this.state==bh.STARTED&&(bh.each(d,function(g){return g.status===bh.UPLOADING?(b=!0,!1):void 0}),b&&this.stop()),this.trigger("FilesRemoved",d),bh.each(d,function(g){g.destroy()}),b&&this.start(),d},dispatchEvent:function(g){var Y,c;if(g=g.toLowerCase(),Y=this.hasEventListener(g)){Y.sort(function(g,Y){return Y.priority-g.priority}),c=[].slice.call(arguments),c.shift(),c.unshift(this);for(var d=0;d<Y.length;d++)if(Y[d].fn.apply(Y[d].scope,c)===!1)return!1}return!0},bind:function(g,Y,c,d){bh.Uploader.prototype.bind.call(this,g,Y,d,c)},destroy:function(){this.trigger("Destroy"),gi=gb=null,this.unbindAll()}})},bh.Uploader.prototype=Y.core.EventTarget.instance,bh.File=function(){function g(g){bh.extend(this,{id:bh.guid(),name:g.name||g.fileName,type:g.type||"",size:g.size||g.fileSize,origSize:g.size||g.fileSize,loaded:0,percent:0,status:bh.QUEUED,lastModifiedDate:g.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var g=this.getSource().getSource();return-1!==bh.inArray(bh.typeOf(g),["blob","file"])?g:null},getSource:function(){return Y[this.id]?Y[this.id]:null},destroy:function(){var g=this.getSource();g&&(g.destroy(),delete Y[this.id])}}),Y[this.id]=g}var Y={};return g}(),bh.QueueProgress=function(){var g=this;g.size=0,g.loaded=0,g.uploaded=0,g.failed=0,g.queued=0,g.percent=0,g.bytesPerSec=0,g.reset=function(){g.size=g.loaded=g.uploaded=g.failed=g.queued=g.percent=g.bytesPerSec=0}},g.plupload=bh}(this,g)}),function(g,Y,c,d,b){"use strict";g.zui.strCode||(g.zui.strCode=function(g){var Y=0;if(g&&g.length)for(var c=0;c<g.length;++c)Y+=c*g.charCodeAt(c);return Y});var K="zui.uploader",f='<div class="file"><div class="file-progress-bar"></div><div class="file-wrapper"><div class="file-icon"><i class="icon icon-file-o"></i></div><div class="content"><div class="file-name"></div><div class="file-size small text-muted">0KB</div></div><div class="actions"><div class="file-status" data-toggle="tooltip"><i class="icon"></i> <span class="text"></span></div><a data-toggle="tooltip" class="btn btn-link btn-download-file" target="_blank"><i class="icon icon-download-alt"></i></a><button type="button" data-toggle="tooltip" class="btn btn-link btn-reset-file" title="Repeat"><i class="icon icon-repeat"></i></button><button type="button" data-toggle="tooltip" class="btn btn-link btn-rename-file" title="Rename"><i class="icon icon-pencil"></i></button><button type="button" data-toggle="tooltip" title="Remove" class="btn btn-link btn-delete-file"><i class="icon icon-trash text-danger"></i></button></div></div></div>',a={rename:!0,renameByClick:!0,dropPlaceholder:!0,previewImageIcon:!0,sendFileName:!0,sendFileId:!0,responseHandler:!0,uploadedMessage:!0,drop_element:"self",browse_button:"hidden",filters:{prevent_duplicates:!0},chunk_size:"1mb",max_retries:3,flash_swf_url:"lib/uploader/Moxie.swf",silverlight_xap_url:"lib/uploader/Moxie.xap"},bh={QUEUED:c.QUEUED,UPLOADING:c.UPLOADING,FAILED:c.FAILED,DONE:c.DONE,STOPPED:c.STOPPED,STARTED:c.STARTED};bh[c.QUEUED]="queue",bh[c.UPLOADING]="uploading",bh[c.FAILED]="failed",bh[c.DONE]="done";var fF={GENERIC_ERROR:c.GENERIC_ERROR,HTTP_ERROR:c.HTTP_ERROR,IO_ERROR:c.IO_ERROR,SECURITY_ERROR:c.SECURITY_ERROR,INIT_ERROR:c.INIT_ERROR,FILE_SIZE_ERROR:c.FILE_SIZE_ERROR,FILE_EXTENSION_ERROR:c.FILE_EXTENSION_ERROR,FILE_DUPLICATE_ERROR:c.FILE_DUPLICATE_ERROR,IMAGE_FORMAT_ERROR:c.IMAGE_FORMAT_ERROR,IMAGE_MEMORY_ERROR:c.IMAGE_MEMORY_ERROR,IMAGE_DIMENSIONS_ERROR:c.IMAGE_DIMENSIONS_ERROR},gF=function(d,a){var bh=this;bh.name=K,bh.$=g(d).addClass("uploader"),a=bh.getOptions(a);var fF=g.isPlainObject(a.lang)?g.extend(!0,{},gF.LANG[fF.lang||g.zui.clientLang()],a.lang):gF.LANG[a.lang];bh.lang=fF;var fU,fj=bh.$,h=a.fileList;fU=h&&"large"!=h&&"grid"!=h?0===h.indexOf(">")?fj.find(h.substr(1)):g(h):fj.find(".file-list,.uploader-files"),fU&&fU.length||(fU=g('<div class="uploader-files file-list"></div>')),fU.parent().length||fj.append(fU),"large"==h?fU.addClass("file-list-lg"):"grid"==h&&fU.addClass("file-list-grid"),fU.children(".file").addClass("file-static"),bh.$list=fU,(a.browseByClickList||fU.hasClass("uploader-btn-browse"))&&fU.addClass("uploader-btn-browse").on("click",".file-wrapper > .actions,.file-renaming .file-name",function(g){g.stopPropagation()});var bd=a.fileTemplate;if(!bd){var U=fU.find(".template");U.length&&(bd=U.first().clone().removeClass("template"),U.remove()),bd||(bd=f)}"string"==typeof bd&&(bd=g(bd),bd.parent()&&(bd=bd.clone().removeClass("template"))),bh.template=bd;var bR=a.browse_button,gV=null;bR&&(0===bR.indexOf(">")?gV=fj.find(bR.substr(1)):"hidden"!==bR&&(gV=g(bR))),gV&&gV.length||(gV=g('<div class="uploader-btn-browse uploader-btn-hidden"></div>').appendTo(fj)),bh.$button=gV.first();var bB=a.drop_element,bQ=("fileList"==bB?bh.$list:"self"==bB?bh.$:g(bB)).first().addClass("file-drag-area"),cj=a.dropPlaceholder;cj===!0&&(cj=fF.dropPlaceholder),cj&&bQ.attr("data-drop-placeholder",cj),bh.$dropElement=bQ,bh.$message=fj.find(".uploader-message").on("click",".close",function(){bh.hideMessage()}),bh.$status=fj.find(".uploader-status"),fj.toggleClass("uploader-rename",!!a.rename),bh.initPlupload(),fj.on("click."+K,".uploader-btn-start",function(g){bh.start()}).on("click."+K,".uploader-btn-browse",function(Y){g(this).is(bh.$button)||bh.$button.trigger("click")}).on("click."+K,".uploader-btn-stop",function(g){bh.stop()}),g("body").on("dragleave."+K+" drop."+K,function(g){fj.removeClass("file-dragable")}).on("dragover."+K+" dragenter."+K,function(g){fj.addClass("file-dragable")}),bQ.on("dragleave."+K+" drop."+K,function(g){fj.removeClass("file-drag-enter")}).on("dragover."+K+" dragenter."+K,function(g){fj.addClass("file-drag-enter")}),fU.on("click."+K,".btn-delete-file",function(){var d=g(this).closest(".file"),b=d.data("file"),K=a.deleteActionOnDone,f=b.status===c.DONE&&g.isFunction(K);if(b.status===c.QUEUED||b.status===c.FAILED||f){var gF=function(){bh.removeFile(b)},fU=function(){if(f){var g=K.call(bh,b,gF);g===!0&&gF()}else gF()},fj=a.deleteConfirm;if(fj){var h=g.isFunction(fj)?fj(b):fj===!0?fF.deleteConfirm:fj;h=h.format(b),Y.bootbox?Y.bootbox.confirm(h,function(g){g&&fU()}):Y.confirm(h)&&fU()}else fU()}}).on("click."+K,".btn-reset-file",function(){var Y=g(this).closest(".file"),d=bh.plupload.getFile(Y.data("id"))||Y.data("file");d.status===c.FAILED&&(d.status=c.QUEUED,bh.showFile(d),a.autoUpload&&bh.start())}),a.rename&&(fU.toggleClass("file-rename-by-click",!!a.renameByClick).toggleClass("file-show-rename-action-on-done",!!a.renameActionOnDone),fU.on("click."+K,".btn-rename-file"+(a.renameByClick?",.file-name":""),function(){var Y=g(this).closest(".file");if(!Y.hasClass("file-renaming")){var d=bh.plupload.getFile(Y.data("id"))||Y.data("file"),f=a.renameActionOnDone,fF=d.status===c.DONE&&g.isFunction(f);if(fF||d.status===c.QUEUED){var gF=Y.find(".file-name").first();Y.addClass("file-renaming"),bh.showFile(d),!a.renameExtension&&d.ext&&gF.text(d.name.substr(0,d.name.length-d.ext.length-1)),gF.attr("contenteditable","true").one("blur",function(){var c=g.trim(gF.text()),fU=function(){if(c!==b&&null!==c&&""!==c){var g=d.ext;g.length&&!a.renameExtension&&c.lastIndexOf("."+g)!==c.length-g.length-1&&(c+="."+g),d.name=c}bh.showFile(d)};if(fF){var fj=f.call(bh,d,c,fU);fj===!0?doRemoveFile():fj===!1&&bh.showFile(d)}else fU();Y.removeClass("file-renaming"),gF.off("keydown."+K).attr("contenteditable",null)}).on("keydown."+K,function(g){13===g.keyCode&&(gF.blur(),g.preventDefault())}).focus()}}})),fU.toggleClass("file-show-delete-action-on-done",!!a.deleteActionOnDone),a.staticFiles&&g.each(a.staticFiles,function(Y,d){d=g.extend({status:c.DONE},d),d["static"]=!0,d.id||(d.id=g.zui.uuid()),bh.showFile(d)}),bh.callEvent("onInit")};gF.DEFAULTS=a,gF.prototype.showMessage=function(g,Y,c){var d=this,K=d.$message;g?clearTimeout(d.lastDismissMessage):d.hideMessage(),Y=Y||"danger",c===b&&(c="danger"===Y?8:5),c<20&&(c*=1e3);var f=K.find(".content");f.length?f.empty().append(g):K.empty().append(g),K.attr("data-type",Y).slideDown("fast"),c&&(d.lastDismissMessage=setTimeout(function(){d.hideMessage()},c))},gF.prototype.hideMessage=function(){clearTimeout(this.lastDismissMessage),this.$message.slideUp("fast")},gF.prototype.start=function(){return this.plupload.start()},gF.prototype.stop=function(){return this.plupload.stop()},gF.prototype.getState=function(){return this.plupload.state},gF.prototype.isStarted=function(){return this.getState()===c.STARTED},gF.prototype.isStopped=function(){return this.getState()===c.STOPPED},gF.prototype.getFiles=function(){return this.plupload.files},gF.prototype.getTotal=function(){return this.plupload.total},gF.prototype.disableBrowse=function(g){return this.$.find(".uploader-btn-browse").attr("disable",g?"disable":null).toggle("disable",!!g),this.plupload.disableBrowse()},gF.prototype.getFile=function(g){return this.plupload.getFile(g)},gF.prototype.destroy=function(){var Y=this,c="."+K;Y.$.off(c).data(K,null),Y.$list.off(c),Y.$dropElement.off(c),g("body").off(c),Y.plupload.destroy()},gF.prototype.previewImageSrc=function(Y,c){if(Y&&Y.getSource&&/image\//.test(Y.type)){var b=g.extend({width:200,height:200},this.options.previewImageSize);if("image/gif"==Y.type){var K=new d.file.FileReader;K.onload=function(){c(K.result),K.destroy(),K=null},K.readAsDataURL(Y.getSource())}else{var f=new d.image.Image;f.onload=function(){f.downsize(b.width,b.height);var g="image/jpeg"==f.type?f.getAsDataURL("image/jpeg",80):f.getAsDataURL();c(g),f.destroy(),f=null},f.load(Y.getSource())}}},gF.prototype.createFileIcon=function(g){var Y=g.type,c=g.ext,d="file-o",b=Y?Y.split("/"):null,K=b&&b.length?b[0]:"",f=(b&&b.length)>1?b[1]:"";return"image"==K?d="file-image":"doc"==c||"docx"==c||"pages"==c?d="file-word":"ppt"==c||"pptx"==c||"key"==c?d="file-powerpoint":"xls"==c||"xlsx"==c||"numbers"==c?d="file-excel":"html"==c||"htm"==c?d="globe":"js"==c||"php"==c||"cs"==c||"jsx"==c||"css"==c||"less"==c||"json"==c||"java"==c||"lua"==c||"py"==c||"c"==c||"cpp"==c||"swift"==c||"h"==c||"sh"==c||"rb"==c||"yml"==c||"ini"==c||"sql"==c||"xml"==c?d="file-code":"apk"==c?d="android":"exe"==c?d="windows":"pkg"==c||"msi"==c||"dmg"==c?d="cube":"epub"==c?d="book":"sketch"==c?d="diamond":"zip"==f||"x-rar"==f||"x-7z-compressed"==f?d="file-archive":"pdf"==f?d="file-pdf":"video"==K?d="file-movie":"audio"==K?d="file-audio":"text"==K&&(d="file-text-o"),'<i class="icon icon-'+d+" file-icon-"+c+'" data-type="'+Y+'"'+(c?' data-ext="'+c+'"':"")+"></i>"},gF.prototype.getFileItem=function(Y){var c=this;if("string"==typeof Y&&(Y=c.plupload.getFile(Y)),!Y)return null;var d=Y.name;if(d&&Y.ext===b){var K=d.lastIndexOf(".");K=K>-1?d.substr(K+1):"",Y.ext=K,Y.type&&/image\//.test(Y.type)&&(Y.isImage=Y.ext)}var f=g("#file-"+Y.id);return f.length||(g.isFunction(c.template)?f=g(c.template(Y,c)):(f=g(c.template).clone(),f.find(".btn-rename-file").attr("title",c.lang.rename),f.find(".btn-delete-file").attr("title",c.lang.remove),f.find(".btn-reset-file").attr("title",c.lang.repeat),f.find(".btn-download-file").attr("title",c.lang.download).attr("download",Y.name)),f.data("id",Y.id).toggleClass("file-static",!!Y["static"]).attr("id","file-"+Y.id).appendTo(c.$list),g.fn.tooltip&&f.find('[data-toggle="tooltip"]').tooltip()),f},gF.prototype.showFile=function(Y,d){var b=this;if(g.isArray(Y))return void g.each(Y,function(g,Y){b.showFile(Y,d)});if("string"==typeof Y&&(Y=b.plupload.getFile(Y)),Y){var K=b.getFileItem(Y);if(K&&K.length){var f=b.options,a=bh[Y.status];if(f.fileFormater)f.fileFormater.call(b,K,Y,a);else{var fF="done"==a&&Y.url?Y.url:null;K.find(".file-name").text(Y.name),K.find(".file-size").text(("uploading"==a?c.formatSize(Math.floor(Y.size*Y.percent/100)).toUpperCase()+"/":"")+c.formatSize(Y.size).toUpperCase()),K.find(".file-icon").html(f.fileIconCreator?f.fileIconCreator(Y.type,Y,b):b.createFileIcon(Y)).css("color","hsl("+g.zui.strCode(Y.type||Y.ext)+", 70%, 40%)"),K.find(".file-progress-bar").css("width",Y.percent+"%");var gF=K.find(".file-status").attr("title",b.lang[a]);gF.find(".text").text("uploading"==a?Y.percent+"%":"failed"==a?b.lang[a]:""),g.fn.tooltip&&K.find('[data-toggle="tooltip"]').tooltip("fixTitle"),K.find("a.btn-download-file, a.file-name").attr("href",fF)}if(f.previewImageIcon&&Y.isImage){var fU=function(){K.find(".file-icon").html('<div class="file-icon-image" style="background-image: url('+Y.previewImage+')"></div>')};Y.previewImage?fU():b.previewImageSrc(Y,function(g){Y.previewImage=g,fU()})}K.attr("data-status",a).data("file",Y)}}},gF.prototype.showStatus=function(){var Y=this,d=Y.plupload,b=Y.$status,K=d.state,f=d.total,a="",bh=d.files.length;if(Y.options.statusCreator)a=Y.options.statusCreator(f,K,Y);else{var fF={uploading:Math.max(0,Math.min(bh,f.uploaded+1)),total:Y.$list.children(".file-static").length+bh,size:c.formatSize(f.size).toUpperCase(),queue:f.queued,failed:f.failed,uploaded:f.uploaded,uploadedSize:c.formatSize(f.loaded).toUpperCase(),percent:f.percent,speed:c.formatSize(f.bytesPerSec).toUpperCase()+"/S"};a=K==c.STARTED?Y.lang.startedStatusText.format(fF):bh<1?Y.lang.initStatusText:Y.lang.stoppedStatusText.format(fF)}b.html(a),f.uploaded<1&&b.find(".uploader-status-uploaded").remove(),f.failed<1&&b.find(".uploader-status-failed").remove(),f.queued<1&&b.find(".uploader-status-queue").remove(),g.fn.tooltip&&b.find('[data-toggle="tooltip"]').tooltip()},gF.prototype.delayShowStatus=function(g){var Y=this;Y.delayStatusTask||(Y.delayStatusTask=!0,g===b&&(g=500),Y.delayStatusTask=setTimeout(function(){Y.showStatus(),Y.delayStatusTask=!1},g))},gF.prototype.removeFile=function(Y,c){var d=this;if("string"==typeof Y&&(Y=d.plupload.getFile(Y)),c||Y["static"]){var b=g("#file-"+Y.id);g.fn.tooltip&&(b.find('[data-toggle="tooltip"]').tooltip("destroy"),g(".tooltip").remove()),b.fadeOut(function(){g(this).remove()})}else d.plupload.removeFile(Y)},gF.prototype.initPlupload=function(){var d=this,K=d.options,f=g.extend({},K,{browse_button:d.$button[0],container:d.$[0],drop_element:d.$dropElement[0],multipart_params:null}),a={FilesAdded:function(g,Y){var c=K.limitFilesCount;if(c){c===!0&&(c=1);var b=d.$list.children(".file").length;if(b+Y.length>c){d.showMessage(d.lang.limitFilesCountMessage.format({count:c}),"warning");for(var f=[],a=0;a<Y.length;++a)b+a+1<=c?f.push(Y[a]):g.removeFile(Y[a]);if(!f.length)return;Y=f}}d.showFile(Y),K.autoUpload&&d.start(),d.showStatus(),d.callEvent("onFilesAdded",[Y])},UploadProgress:function(g,Y){d.showFile(Y),d.delayShowStatus(),d.callEvent("onUploadProgress",Y)},FileUploaded:function(Y,f,a){if(a){var bh="object"==typeof a?a.response:a;try{f.remoteData=g.parseJSON(bh)}catch(g){}}d.qiniuEnable&&f.remoteData&&(f.url=Y.settings.domain+f.remoteData.key);var fF=K.responseHandler;if(fF){var gF=null;if(g.isFunction(fF))gF=fF.call(d,a,f);else if(a.response){var fU=f.remoteData;if(g.isPlainObject(fU)){var fj=fU.status||fU.result;fj!==b&&"ok"!==fj&&"success"!==fj&&200!==fj&&(gF={message:fU.message,data:fU}),fU.id!==b&&(f.remoteId=fU.id),fU.url!==b&&(f.url=fU.url)}}if(gF)return gF=g.isPlainObject(gF)?gF:{message:gF},f.status=c.FAILED,gF.code===b&&(gF.code=c.GENERIC_ERROR),gF.file=f,gF.responseObject=a,void Y.trigger("Error",gF)}if(f.status===c.DONE&&d.lastUploadedCount++,d.showFile(f,a),d.showStatus(),d.callEvent("onFileUploaded",[f,a]),f.status===c.DONE){var h=K.removeUploaded;h&&setTimeout(function(){g("#file-"+f.id).fadeOut(function(){g(this).remove()})},"number"==typeof h?h:2e3)}},UploadComplete:function(Y,b){d.showFile(b),d.showStatus();var f=K.uploadedMessage;if(f){var a=d.lastUploadedCount,bh=0;g.each(b,function(g,Y){Y.status===c.FAILED&&bh++});var fF="",gF={uploaded:a,failed:bh};fF="string"==typeof f?f.format(gF):g.isFunction(f)?f(gF):d.lang[bh>0?"uploadHasFailedMessage":a>0?"uploadSuccessMessage":"uploadEmptyMessage"].format(gF),d.showMessage(fF,bh>0?"danger":a>0?"success":"warning",3)}d.callEvent("onUploadComplete",[b])},FilesRemoved:function(Y,c){g.each(c,function(g,Y){d.removeFile(Y,!0)}),d.showStatus(),d.callEvent("onFilesRemoved",c)},ChunkUploaded:function(g,Y,c){d.callEvent("onChunkUploaded",[Y,c])},UploadFile:function(g,Y){d.showStatus(),d.callEvent("onUploadFile",Y)},BeforeUpload:function(Y,c){var b=K.multipart_params,f={};K.sendFileName&&(f[K.sendFileName===!0?"name":K.sendFileName]=c.name),K.sendFileId&&(f[K.sendFileId===!0?"uuid":K.sendFileId]=c.id),f=g.extend(f,g.isFunction(b)?b(c,f):b),Y.setOption("multipart_params",f),d.callEvent("onBeforeUpload",c)},Refresh:function(g){d.showStatus(),d.callEvent("onRefresh")},StateChanged:function(g){g.state===c.STARTED&&(d.lastUploadedCount=0),d.$.toggleClass("uploader-started",c.STARTED===g.state),d.hideMessage(),d.showStatus(),d.callEvent("onStateChanged",g.state)},QueueChanged:function(g){d.showStatus(),d.callEvent("onQueueChanged")},Error:function(g,Y){var b="danger";Y.code!==c.FILE_SIZE_ERROR&&Y.code!==c.FILE_SIZE_ERROR&&Y.code!==c.FILE_EXTENSION_ERROR&&Y.code!==c.FILE_DUPLICATE_ERROR&&Y.code!==c.MAGE_FORMAT_ERROR||(b="warning"),d.showMessage(Y.message,b),d.callEvent("onError",Y)}};if(c.addI18n(d.lang.i18n),d.qiniuEnable=g.isPlainObject(K.qiniu)&&Y.Qiniu,d.qiniuEnable){var bh=K.qiniu,fF=bh.key;delete f.qiniu,fF?(delete bh.key,g.isFunction(fF)&&(a.Key=fF)):a.Key=function(g,Y){return Y.name},bh.init=a,f=g.extend(f,bh);var gF=new QiniuJsSDK,fU=gF.uploader(f);d.plupload=fU}else{var fU=new c.Uploader(f);fU.init(),d.plOptions=f,d.plupload=fU,g.each(a,function(g,Y){fU.bind(g,Y)})}},gF.prototype.getOptions=function(Y){return this.options=g.extend({lang:g.zui.clientLang()},a,this.$.data(),Y),this.options},gF.prototype.callEvent=function(Y,c){var d=this;if(g.isArray(c)||(c=[c]),d.$.trigger(Y,c),g.isFunction(d.options[Y]))return d.options[Y].apply(d,c)},g.fn.uploader=function(Y,c){return this.each(function(){var d=g(this),b=d.data(K),f="object"==typeof Y&&Y;b||d.data(K,b=new gF(this,f)),"string"==typeof Y&&b[Y](c)})},gF.NAME=K,gF.STATUS=bh,gF.ERRORS=fF,gF.NAME=K,gF.LANG={zh_cn:{limitFilesCountMessage:"所有文件数目不能超过 {count} 个，如果要上传此文件请先从列表移除文件。",uploadEmptyMessage:"没有文件等待上传。",uploadSuccessMessage:"已上传 <strong>{uploaded}</strong> 个文件。",uploadHasFailedMessage:"已上传 <strong>{uploaded}</strong> 个文件，<strong>{failed}</strong> 个文件上传失败。",startedStatusText:'正在上传第 <strong>{uploading}</strong> 个文件，共 <strong title="总大小：{size}" data-toggle="tooltip" class="text-primary">{total}</strong> 个文件，<span class="uploader-status-uploaded">已上传 <strong title="总大小：{uploadedSize}" data-toggle="tooltip" class="text-primary">{uploaded}</strong> 个文件，</span><span class="uploader-status-failed"><strong>{failed}</strong> 个上传失败，</span>进度 <strong>{percent}%</strong>，平均速度 <strong>{speed}</strong>。',initStatusText:"添加文件或拖放文件来上传。",stoppedStatusText:'共 <strong title="总大小：{size}" data-toggle="tooltip" class="text-primary">{total}</strong> 个文件<span class="uploader-status-queue">，<strong>{queue}</strong> 个文件等待上传</span><span class="uploader-status-uploaded">，已上传 <strong title="总大小：{uploadedSize}" data-toggle="tooltip" class="text-primary">{uploaded}</strong> 个文件</span><span class="uploader-status-failed">，<strong>{failed}</strong> 个上传失败</span><span class="uploader-status-uploaded">，平均速度 <strong>{speed}</strong></span>。',deleteConfirm:"确定移除文件【{name}】？",download:"下载",rename:"重命名",repeat:"重新上传",remove:"移除",dropPlaceholder:"将文件拖放至在此处。",queue:"待上传",uploading:"正在上传",failed:"失败",done:"已上传",i18n:{"Stop Upload":"停止上传","Upload URL might be wrong or doesn't exist.":"上传的URL可能是错误的或不存在。",tb:"tb",Size:"大小",Close:"关闭","You must specify either browse_button or drop_element.":"您必须指定 browse_button 或者 drop_element。","Init error.":"初始化错误。","Add files to the upload queue and click the start button.":"将文件添加到上传队列，然后点击”开始上传“按钮。",List:"列表",Filename:"文件名","%s specified, but cannot be found.":"%s 已指定，但是没有找到。","Image format either wrong or not supported.":"图片格式错误或者不支持。",Status:"状态","HTTP Error.":"HTTP 错误。","Start Upload":"开始上传","Error: File too large:":"错误: 文件太大:",kb:"kb","Duplicate file error.":"无法添加重复文件。","File size error.":"文件大小错误。","N/A":"N/A",gb:"gb","Error: Invalid file extension:":"错误：无效的文件扩展名:","Select files":"选择文件","%s already present in the queue.":"%s 已经在当前队列里。","Resoultion out of boundaries! <b>%s</b> runtime supports images only up to %wx%hpx.":"超限。<b>%s</b> 支持最大 %wx%hpx 的图片。","File: %s":"文件: %s",b:"b","Uploaded %d/%d files":"已上传 %d/%d 个文件","Upload element accepts only %d file(s) at a time. Extra files were stripped.":"每次只接受同时上传 %d 个文件，多余的文件将会被删除。","%d files queued":"%d 个文件加入到队列","File: %s, size: %d, max file size: %d":"文件: %s, 大小: %d, 最大文件大小: %d",Thumbnails:"缩略图","Drag files here.":"把文件拖到这里。","Runtime ran out of available memory.":"运行时已消耗所有可用内存。","File count error.":"文件数量错误。","File extension error.":"文件扩展名错误。",mb:"mb","Add Files":"增加文件"}},zh_tw:{limitFilesCountMessage:"所有文件數目不能超過 {count} 個。",uploadEmptyMessage:"没有文件等待上傳。",uploadSuccessMessage:"已上傳 <strong>{uploaded}</strong> 个文件。",uploadHasFailedMessage:"文件上傳完成，已上傳 <strong>{uploaded}</strong> 個文件，<strong>{failed}</strong> 個文件上傳失败。",startedStatusText:'正在上傳第<strong>{uploading}</strong> 個文件，共<strong title="總大小：{size}" data-toggle="tooltip" class="text -primary">{total}</strong> 個文件，<span class="uploader-status-uploaded">已上傳<strong title="總大小：{uploadedSize}" data-toggle="tooltip" class="text-primary">{uploaded}</strong> 個文件，</span><span class="uploader-status-failed"><strong>{failed}</ strong> 個上傳失敗，</span>進度<strong>{percent}%</strong>，平均速度<strong>{speed}</strong>。',initStatusText:"添加文件或拖放文件來上傳。",stoppedStatusText:'共<strong title="總大小：{size}" data-toggle="tooltip" class="text-primary">{total}</strong> 個文件<span class="uploader-status-queue">，<strong>{queue}</strong> 個文件等待上傳</span><span class="uploader-status-uploaded">，已上傳<strong title="總大小：{uploadedSize}" data-toggle="tooltip" class="text-primary">{uploaded}</strong> 個文件</span><span class=" uploader-status-failed">，<strong>{failed}</strong> 個上傳失敗</span><span class="uploader-status-uploaded">，平均速度<strong>{speed}< /strong></span>。',deleteConfirm:"確定移除文件【{name}】？",download:"下载",rename:"重命名",repeat:"重新上傳",remove:"移除",dropPlaceholder:"將文件拖放至在此處。",queue:"待上傳",uploading:"正在上傳",failed:"失敗",done:"已上傳",i18n:{"Stop Upload":"停止上傳","Upload URL might be wrong or doesn't exist.":"檔案URL可能有誤或者不存在。",tb:"tb",Size:"大小",Close:"關閉","You must specify either browse_button or drop_element.":"您必須指定 browse_button 或 drop_element。","Init error.":"初始化錯誤。","Add files to the upload queue and click the start button.":"將檔案加入上傳序列，然後點選”開始上傳“按鈕。",List:"清單",Filename:"檔案名稱","%s specified, but cannot be found.":"找不到已選擇的 %s。","Image format either wrong or not supported.":"圖片格式錯誤或者不支援。",Status:"狀態","HTTP Error.":"HTTP 錯誤。","Start Upload":"開始上傳","Error: File too large:":"錯誤: 檔案大小太大:",kb:"kb","Duplicate file error.":"錯誤：檔案重複。","File size error.":"錯誤：檔案大小超過限制。","N/A":"N/A",gb:"gb","Error: Invalid file extension:":"錯誤：不接受的檔案格式:","Select files":"選擇檔案","%s already present in the queue.":"%s 已經存在目前的檔案序列。","Resoultion out of boundaries! <b>%s</b> runtime supports images only up to %wx%hpx.":"圖片解析度超出範圍！ <b>%s</b> 最高只支援到 %wx%hpx。","File: %s":"檔案: %s",b:"b","Uploaded %d/%d files":"已上傳 %d/%d 個文件","Upload element accepts only %d file(s) at a time. Extra files were stripped.":"每次只能上傳 %d 個檔案，超過限制數量的檔案將被忽略。","%d files queued":"%d 個檔案加入到序列","File: %s, size: %d, max file size: %d":"檔案: %s, 大小: %d, 檔案大小上限: %d",Thumbnails:"縮圖","Drag files here.":"把檔案拖曳到這裡。","Runtime ran out of available memory.":"執行時耗盡了所有可用的記憶體。","File count error.":"檔案數量錯誤。","File extension error.":"檔案副檔名錯誤。",mb:"mb","Add Files":"增加檔案"}},en:{limitFilesCountMessage:"All files count can not over {count}.",uploadEmptyMessage:"No file in queue to upload",uploadSuccessMessage:"Uploaded <strong>{uploaded}</strong> files。",uploadHasFailedMessage:"Uploaded complete, <strong>{uploaded}</strong> success, <strong>{failed}</strong> failed.",startedStatusText:'Uploading NO.<strong>{uploading}</strong> file, total <strong title="Total size: {size}" data-toggle="tooltip" class="text-primary">{total}</strong> files, <span class="uploader-status-uploaded">Uploaded <strong title="Total size: {uploadedSize}" data-toggle="tooltip" class="text-primary">{uploaded}</strong> files, </span><span class="uploader-status-failed"><strong>{failed}</strong> failed, </span>progress <strong>{percent}%</strong>, average spped <strong>{speed}</strong>。',initStatusText:"Append or drag file here.",stoppedStatusText:'Total <strong title="Total size: {size}" data-toggle="tooltip" class="text-primary">{total}</strong> files<span class="uploader-status-queue">, <strong>{queue}</strong> files in queue</span><span class="uploader-status-uploaded">, uploaded <strong title="Total size: {uploadedSize}" data-toggle="tooltip" class="text-primary">{uploaded}</strong> files</span><span class="uploader-status-failed">, <strong>{failed}</strong> failed</span><span class="uploader-status-uploaded">, average spped <strong>{speed}</strong></span>。',deleteConfirm:'Remove file "{name}" form upload queue?',rename:"Rename",download:"Download",repeat:"Repeat",remove:"Remove",dropPlaceholder:"Drop file here.",queue:"Wait",uploading:"Uploading",failed:"Failed",done:"Done",i18n:{"Stop Upload":"Stop Upload","Upload URL might be wrong or doesn't exist.":"Upload URL might be wrong or doesn't exist.",tb:"tb",Size:"Size",Close:"Close","You must specify either browse_button or drop_element.":"You must specify either browse_button or drop_element.","Init error.":"Init error.","Add files to the upload queue and click the start button.":"Add files to the upload queue and click the start button.",List:"List",Filename:"Filename","%s specified, but cannot be found.":"%s specified, but cannot be found.","Image format either wrong or not supported.":"Image format either wrong or not supported.",Status:"Status","HTTP Error.":"HTTP Error.","Start Upload":"Start Upload","Error: File too large:":"Error: File too large:",kb:"kb","Duplicate file error.":"Duplicate file error.","File size error.":"File size error.","N/A":"N/A",gb:"gb","Error: Invalid file extension:":"Error: Invalid file extension:","Select files":"Select files","%s already present in the queue.":"%s already present in the queue.","Resoultion out of boundaries! <b>%s</b> runtime supports images only up to %wx%hpx.":"Resoultion out of boundaries! <b>%s</b> runtime supports images only up to %wx%hpx.","File: %s":"File: %s",b:"b","Uploaded %d/%d files":"Uploaded %d/%d files","Upload element accepts only %d file(s) at a time. Extra files were stripped.":"Upload element accepts only %d file(s) at a time. Extra files were stripped.","%d files queued":"%d files queued","File: %s, size: %d, max file size: %d":"File: %s, size: %d, max file size: %d",Thumbnails:"Thumbnails","Drag files here.":"Drag files here.","Runtime ran out of available memory.":"Runtime ran out of available memory.","File count error.":"File count error.","File extension error.":"File extension error.",mb:"mb","Add Files":"Add Files"}}},g.zui.plupload=c,g.zui.moxie=d,g.zui.Uploader=gF,g.fn.uploader.Constructor=gF,Y.mOxie||(Y.mOxie={Env:d.core.utils.Env,XMLHttpRequest:d.xhr.XMLHttpRequest}),g(function(){g('[data-ride="uploader"]').uploader()})}(jQuery,window,plupload,moxie,void 0);