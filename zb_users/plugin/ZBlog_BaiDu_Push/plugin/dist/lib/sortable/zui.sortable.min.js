/*!
 * ZUI: 排序 - v1.7.0 - 2017-06-17
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2017 cnezsoft.com; Licensed MIT
 */
+function(cJdBeK,habhdD,fiaLea){"use strict";if(!cJdBeK.fn.droppable)return void console.error("Sortable requires droppable.js");var dNdEbB="zui.sortable",fbfMdB={selector:"li,div",dragCssClass:"invisible",sortingClass:"sortable-sorting"},gbgXfc="order",eOcLgD=function(habhdD,fiaLea){var dNdEbB=this;dNdEbB.$=cJdBeK(habhdD),dNdEbB.options=cJdBeK.extend({},fbfMdB,dNdEbB.$.data(),fiaLea),dNdEbB.init()};eOcLgD.DEFAULTS=fbfMdB,eOcLgD.NAME=dNdEbB,eOcLgD.prototype.init=function(){var habhdD=this,fiaLea=habhdD.$,dNdEbB=habhdD.options,fbfMdB=dNdEbB.selector,eOcLgD=dNdEbB.sortingClass,dVfCdM=dNdEbB.dragCssClass,ddgUgZ=dNdEbB.reverse,hcfi=function(fiaLea){fiaLea=fiaLea||habhdD.getItems(1);var dNdEbB=[];fiaLea.each(function(){var habhdD=cJdBeK(this).data(gbgXfc);"number"==typeof habhdD&&dNdEbB.push(habhdD)}),dNdEbB.sort(function(cJdBeK,habhdD){return cJdBeK-habhdD});for(var fbfMdB=fiaLea.length;dNdEbB.length<fbfMdB;)dNdEbB.push(dNdEbB.length?dNdEbB[dNdEbB.length-1]+1:0);ddgUgZ&&dNdEbB.reverse(),fiaLea.each(function(habhdD){cJdBeK(this).data(gbgXfc,dNdEbB[habhdD]).attr("data-"+gbgXfc,dNdEbB[habhdD])})};hcfi(),fiaLea.droppable({handle:dNdEbB.trigger,target:fbfMdB,selector:fbfMdB,container:fiaLea,always:dNdEbB.always,flex:!0,before:dNdEbB.before,mouseButton:dNdEbB.mouseButton,start:function(cJdBeK){dVfCdM&&cJdBeK.element.addClass(dVfCdM),habhdD.trigger("start")},drag:function(cJdBeK){if(fiaLea.addClass(eOcLgD),cJdBeK.isIn){var dNdEbB=cJdBeK.element,fbfMdB=cJdBeK.target,dVfCdM=dNdEbB.data(gbgXfc),cJdBeKcJdBeK=fbfMdB.data(gbgXfc);if(dVfCdM==cJdBeKcJdBeK)return;dVfCdM>cJdBeKcJdBeK?fbfMdB[ddgUgZ?"after":"before"](dNdEbB):fbfMdB[ddgUgZ?"before":"after"](dNdEbB);var habhdDcJdBeK=habhdD.getItems(1);hcfi(habhdDcJdBeK),habhdD.trigger(gbgXfc,{list:habhdDcJdBeK,element:dNdEbB})}},finish:function(cJdBeK){dVfCdM&&cJdBeK.element&&cJdBeK.element.removeClass(dVfCdM),fiaLea.removeClass(eOcLgD),habhdD.trigger("finish",{list:habhdD.getItems(1),element:cJdBeK.element})}})},eOcLgD.prototype.destroy=function(){this.$.droppable("destroy")},eOcLgD.prototype.reset=function(){this.destroy(),this.init()},eOcLgD.prototype.getItems=function(habhdD){var fiaLea=this.$.children(this.options.selector).not(".drag-shadow");return habhdD?fiaLea:fiaLea.map(function(){var habhdD=cJdBeK(this);return{item:habhdD,order:habhdD.data("order")}})},eOcLgD.prototype.trigger=function(habhdD,fiaLea){return cJdBeK.zui.callEvent(this.options[habhdD],fiaLea,this)},cJdBeK.fn.sortable=function(habhdD){return this.each(function(){var fiaLea=cJdBeK(this),fbfMdB=fiaLea.data(dNdEbB),gbgXfc="object"==typeof habhdD&&habhdD;fbfMdB?"object"==typeof habhdD&&fbfMdB.reset():fiaLea.data(dNdEbB,fbfMdB=new eOcLgD(this,gbgXfc)),"string"==typeof habhdD&&fbfMdB[habhdD]()})},cJdBeK.fn.sortable.Constructor=eOcLgD}(jQuery,window,document);