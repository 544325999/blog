/*!
 * ZUI: 看板 - v1.7.0 - 2017-06-17
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2017 cnezsoft.com; Licensed MIT
 */
!function(gVaHfhecgWdV){"use strict";if(!gVaHfhecgWdV.fn.droppable)throw new Error("Droppable requires for boards");var fXaMbgbaaVfK=function(fXaMbgbaaVfK,fJfKaUagbKfc){this.$=gVaHfhecgWdV(fXaMbgbaaVfK),this.options=this.getOptions(fJfKaUagbKfc),this.getLang(),this.init()};fXaMbgbaaVfK.DEFAULTS={langs:{zh_cn:{append2end:"移动到末尾"},zh_tw:{append2end:"移动到末尾"},en:{append2end:"Move to the end."}}},fXaMbgbaaVfK.prototype.getOptions=function(fJfKaUagbKfc){return fJfKaUagbKfc=gVaHfhecgWdV.extend({lang:gVaHfhecgWdV.zui.clientLang()},fXaMbgbaaVfK.DEFAULTS,this.$.data(),fJfKaUagbKfc)},fXaMbgbaaVfK.prototype.getLang=function(){var gVaHfhecgWdV=this.options;this.lang=gVaHfhecgWdV.langs[gVaHfhecgWdV.lang]||gVaHfhecgWdV.langs[fXaMbgbaaVfK.DEFAULTS.lang]},fXaMbgbaaVfK.prototype.init=function(){var fXaMbgbaaVfK=1,fJfKaUagbKfc=this.lang;this.$.find('.board-item:not(".disable-drop"), .board:not(".disable-drop")').each(function(){var dEfSeIcVfUcH=gVaHfhecgWdV(this);dEfSeIcVfUcH.attr("id")?dEfSeIcVfUcH.attr("data-id",dEfSeIcVfUcH.attr("id")):dEfSeIcVfUcH.attr("data-id")||dEfSeIcVfUcH.attr("data-id","board"+fXaMbgbaaVfK++),dEfSeIcVfUcH.hasClass("board")&&dEfSeIcVfUcH.find(".board-list").append('<div class="board-item board-item-empty"><i class="icon-plus"></i> {append2end}</div>'.format(fJfKaUagbKfc)).append('<div class="board-item board-item-shadow"></div>'.format(fJfKaUagbKfc))}),this.bind()},fXaMbgbaaVfK.prototype.bind=function(fXaMbgbaaVfK){var fJfKaUagbKfc=this.$,dEfSeIcVfUcH=this.options;fJfKaUagbKfc.droppable(gVaHfhecgWdV.extend({before:dEfSeIcVfUcH.before,target:'.board-item:not(".disable-drop, .board-item-shadow")',flex:!0,selector:'.board-item:not(".disable-drop, .board-item-shadow")',start:function(gVaHfhecgWdV){fJfKaUagbKfc.addClass("dragging").find(".board-item-shadow").height(gVaHfhecgWdV.element.outerHeight())},drag:function(gVaHfhecgWdV){if(fJfKaUagbKfc.find(".board.drop-in-empty").removeClass("drop-in-empty"),gVaHfhecgWdV.isIn){var fXaMbgbaaVfK=gVaHfhecgWdV.target.closest(".board").addClass("drop-in"),dEfSeIcVfUcH=fXaMbgbaaVfK.find(".board-item-shadow"),fHbScDePeB=gVaHfhecgWdV.target;fJfKaUagbKfc.addClass("drop-in").find(".board.drop-in").not(fXaMbgbaaVfK).removeClass("drop-in"),dEfSeIcVfUcH.insertBefore(fHbScDePeB),fXaMbgbaaVfK.toggleClass("drop-in-empty",fHbScDePeB.hasClass("board-item-empty"))}},drop:function(fXaMbgbaaVfK){if(fXaMbgbaaVfK.isNew){var fJfKaUagbKfc;gVaHfhecgWdV.isFunction(dEfSeIcVfUcH.drop)&&(fJfKaUagbKfc=dEfSeIcVfUcH.drop(fXaMbgbaaVfK)),fJfKaUagbKfc!==!1&&fXaMbgbaaVfK.element.insertBefore(fXaMbgbaaVfK.target)}},finish:function(){fJfKaUagbKfc.removeClass("dragging").removeClass("drop-in").find(".board.drop-in").removeClass("drop-in")}},dEfSeIcVfUcH.droppable))},gVaHfhecgWdV.fn.boards=function(fJfKaUagbKfc){return this.each(function(){var dEfSeIcVfUcH=gVaHfhecgWdV(this),fHbScDePeB=dEfSeIcVfUcH.data("zui.boards"),gVaHfhecgWdVgVaHfhecgWdV="object"==typeof fJfKaUagbKfc&&fJfKaUagbKfc;fHbScDePeB||dEfSeIcVfUcH.data("zui.boards",fHbScDePeB=new fXaMbgbaaVfK(this,gVaHfhecgWdVgVaHfhecgWdV)),"string"==typeof fJfKaUagbKfc&&fHbScDePeB[fJfKaUagbKfc]()})},gVaHfhecgWdV.fn.boards.Constructor=fXaMbgbaaVfK}(jQuery);